(this["webpackJsonpant-pro"]=this["webpackJsonpant-pro"]||[]).push([[66],{612:function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return m}));var s=a(258),l=a.n(s),n=a(21),r=a(225),d=a.n(r);function i(){const e=JSON.parse(localStorage.getItem("user_id")||"null");return e&&e.token?{Authorization:"Bearer "+e.token}:{}}async function c(e){return{data:d.a.AES.encrypt(JSON.stringify(e),"bXL<;XBG4Uf1").toString()}}async function o(e){if(e.data.dataEncrupt&&1==e.data.dataEncrupt&&e.data){let t=e.data.data;const a=d.a.AES.decrypt(t,"?l5V-37g~<Li").toString(d.a.enc.Utf8);a&&null!=a&&""!=a&&void 0!=a&&(e.data.data=JSON.parse(a))}return e.data}const x=a(26).a.domainName,h=async(e,t,a)=>{try{let a={"Content-Type":"application/json",Authorization:i().Authorization};"BABAJI99"===x&&(a["X-Frontend-Secret"]="7-s54ebvQQpsdDA");await c(t);const s=await l()({method:"GET",url:n.a.BACKEND_URL+e,data:{...t},headers:a});return await o(s),p(s),s}catch(r){var s;console.error(r),null!==(s=r.request)&&void 0!==s&&s.status&&j(r.request.status)}},m=async(e,t,a)=>{try{let a={"Content-Type":"application/json",Authorization:i().Authorization};"BABAJI99"===x&&(a["X-Frontend-Secret"]="7-s54ebvQQpsdDA");await c(t);const s=await l()({method:"POST",url:n.a.BACKEND_URL+e,data:{...t},headers:a});return await o(s),s.data}catch(r){var s;console.error(r),null!==(s=r.request)&&void 0!==s&&s.status&&j(r.request.status)}},p=async e=>{var t;3===(null===(t=e.data)||void 0===t?void 0:t.code)&&(localStorage.clear(),sessionStorage.clear(),window.location.href="/signin")},j=async function(){401===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&(localStorage.clear(),sessionStorage.clear(),window.location.href="/signin")}},950:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a(22),n=a(886),r=a(895),d=a(350),i=a(784),c=a(901),o=a(352),x=a(592),h=a(593),m=a(222),p=a(256),j=a(103),u=a(894),b=a(223),g=a.n(b),y=a(612),f=a(1);const{Option:O}=n.a,{RangePicker:I}=r.a;var v=Object(l.c)((e=>{const{users:t}=e;return{users:t}}))((e=>{let{users:t}=e;const[a,l]=Object(s.useState)({offset:0,fieldsUser:{marketId:"",selectionId:"",fancyType:"nonDeletedFancy",clientId:"",minAmt:"",maxAmt:"",username:"",password:"",size:50},errorsUser:{},clientList:[],isFetch:!1,keyWord:"",pageNo:1,fancyBetList:[],sessionList:[],filteredData:[],selectedIds:[],updateModal:!1,rollBackModal:!1,total:0,dateRange:[]}),[r,b]=Object(s.useState)(!1),I=e=>{const{name:t,value:a}=e.target;l((e=>({...e,fieldsUser:{...e.fieldsUser,[t]:a},errorsUser:{...e.errorsUser,[t]:""}})))},v=(e,t)=>{l((a=>({...a,fieldsUser:{...a.fieldsUser,[e]:t},errorsUser:{...a.errorsUser,[e]:""}}))),["fancyType","selectionId","clientId","size"].includes(e)&&N(t)},w=async()=>{const{marketId:e}=a.fieldsUser;let t={marketId:e},s=await Object(y.b)("sports/clientListByMarketId",t);s&&l((e=>({...e,clientList:s.data})))},k=async()=>{const{marketId:e}=a.fieldsUser;l((e=>({...e,isFetch:!0})));let t=await Object(y.a)("sports/getSessionList?marketId=".concat(e));if(t){var s,n;const e=null===t||void 0===t||null===(s=t.data)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.sort(((e,t)=>{const a=e=>/^\d/.test(e),s=e=>/OVER/.test(e),l=e=>{var t;return parseInt((null===(t=e.match(/^\d+/))||void 0===t?void 0:t[0])||"0",10)},n=e=>/\b1ST\b|\bFIRST\b/.test(null===e||void 0===e?void 0:e.toUpperCase()),r=e.sessionNames[0],d=t.sessionNames[0],i=a(r),c=a(d),o=s(r),x=s(d),h=n(r),m=n(d);if(h&&!m)return 1;if(!h&&m)return-1;if(i&&c){if(o&&!x)return-1;if(!o&&x)return 1;return l(r)-l(d)}return i&&!c?-1:!i&&c?1:null===r||void 0===r?void 0:r.localeCompare(d)}));l((t=>({...t,sessionList:e})))}l((e=>({...e,isFetch:!1})))},N=async e=>{const{marketId:t,fancyType:s,clientId:n,selectionId:r,minAmt:d,maxAmt:i,username:c,size:o}=a.fieldsUser;let x={marketId:t,fancyBet:!0,isDeleted:"deletedFancy"===s?1:"0",downlineUserId:n,downlineUserType:"client",keyWord:a.keyWord,pageNo:a.pageNo,size:e||o,minAmt:d?parseInt(d)-1:void 0,maxAmt:i?parseInt(i)+1:void 0,username:c,selectionId:r},h=await Object(y.b)("sports/betsList",x);h&&l((e=>({...e,fancyBetList:h.data.fancyBetData,filteredData:h.data.fancyBetData,total:h.data.totalFancyCount})))},C=[{title:Object(f.jsx)(i.a,{onChange:e=>{const t=a.filteredData.map((e=>e._id));l((a=>({...a,selectedIds:e.target.checked?t:[]})))},checked:a.selectedIds.length>0&&a.selectedIds.length===a.filteredData.length}),dataIndex:"_id",key:"checkbox",render:e=>Object(f.jsx)(i.a,{onChange:()=>(e=>{const t=a.selectedIds.includes(e)?a.selectedIds.filter((t=>t!==e)):[...a.selectedIds,e];l((e=>({...e,selectedIds:t})))})(e),checked:a.selectedIds.includes(e)}),width:50},{title:"Sr no.",key:"index",render:(e,t,s)=>a.offset+s+1,width:80},{title:"Rate",dataIndex:"odds",key:"odds",width:100},{title:"Amount",dataIndex:"amount",key:"amount",width:100},{title:"Type",dataIndex:"type",key:"type",render:e=>"N"===e?"No":"Yes",width:80},{title:"Run",dataIndex:"run",key:"run",width:100},{title:"Team",dataIndex:"sessionName",key:"sessionName",width:150},{title:"Client",key:"client",render:e=>{var t,a;return Object(f.jsxs)("span",{children:[(null===(t=e.userInfo)||void 0===t?void 0:t.clientCode)||"N/A",(null===(a=e.userInfo)||void 0===a?void 0:a.clientName)&&" (".concat(e.userInfo.clientName,")")]})},width:150},{title:"Agent",key:"agent",render:e=>{var t;return(null===(t=e.userInfo)||void 0===t?void 0:t.creatorName)||"N/A"},width:150},{title:"Date",key:"date",render:e=>e.createdAt?g()(e.createdAt).utcOffset("+05:30").format("DD MMM hh:mm:ss A"):"N/A",width:150},{title:"Decision Run",dataIndex:"decisionRun",key:"decisionRun",width:120},{title:"Loss",key:"loss",render:e=>Number.parseFloat(Math.abs(e.loss)).toFixed(2),width:100},{title:"Profit",key:"profit",render:e=>Number.parseFloat(e.profit).toFixed(2),width:100},{title:"IP",dataIndex:"ip",key:"ip",width:120}];return Object(f.jsx)(c.a,{title:"Fancy Bets Management",loading:a.isFetch,extra:Object(f.jsx)(o.b,{children:Object(f.jsxs)("span",{className:"gx-text-white gx-px-2",children:["Total FancyBets: ",a.total]})}),className:"gx-card",children:Object(f.jsxs)("div",{className:"gx-px-2 gx-py-2 ",children:[Object(f.jsxs)(x.a,{className:"gx-w-100",children:[Object(f.jsx)(h.a,{md:6,xs:24,className:"gx-px-1",children:Object(f.jsx)(m.a.Item,{layout:"vertical",wrapperCol:{span:24},children:Object(f.jsx)(p.a,{name:"marketId",value:a.fieldsUser.marketId,onChange:I,placeholder:"Enter Market ID",allowClear:!0,className:"gx-py-2"})})}),Object(f.jsx)(h.a,{xs:24,md:12,className:"gx-px-2",children:Object(f.jsx)(j.a,{type:"primary",size:"large",onClick:()=>{const{marketId:e}=a.fieldsUser;e?(b(!0),w(),k(),N()):d.b.error("Please enter Market ID")},loading:a.isFetch,children:"Load Data"})})]}),r&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(x.a,{children:[Object(f.jsx)(h.a,{lg:8,sm:12,xs:24,className:"gx-px-5",children:Object(f.jsx)(m.a.Item,{label:Object(f.jsx)("div",{className:"gx-px-2 gx-font-weight-bold gx-fs-md",children:"Type"}),layout:"vertical",wrapperCol:{span:24},children:Object(f.jsxs)(n.a,{value:a.fieldsUser.fancyType,onChange:e=>v("fancyType",e),style:{maxWidth:300},children:[Object(f.jsx)(O,{value:"nonDeletedFancy",children:"Non-Deleted Fancy"}),Object(f.jsx)(O,{value:"deletedFancy",children:"Deleted Fancy"})]})})}),Object(f.jsx)(h.a,{lg:8,sm:12,xs:24,className:"gx-px-5",children:Object(f.jsx)(m.a.Item,{label:Object(f.jsx)("div",{className:"gx-px-2 gx-font-weight-bold gx-fs-md",children:"Client"}),layout:"vertical",wrapperCol:{span:24},children:Object(f.jsxs)(n.a,{showSearch:!0,placeholder:"Select client",optionFilterProp:"children",value:a.fieldsUser.clientId,onChange:e=>v("clientId",e),style:{maxWidth:300},children:[Object(f.jsx)(O,{value:"",children:"All Users"}),a.clientList.map((e=>Object(f.jsxs)(O,{value:e.clientId,children:[e.userInfo.name," (",e.userInfo.username,")"]},e.clientId)))]})})}),Object(f.jsx)(h.a,{lg:8,sm:12,xs:24,className:"gx-px-5",children:Object(f.jsx)(m.a.Item,{label:Object(f.jsx)("div",{className:"gx-px-2 gx-font-weight-bold gx-fs-md",children:"Fancy"}),layout:"vertical",wrapperCol:{span:24},children:Object(f.jsxs)(n.a,{value:a.fieldsUser.selectionId,onChange:e=>v("selectionId",e),style:{maxWidth:300},children:[Object(f.jsx)(O,{value:"",children:"All Fancies"}),a.sessionList.map(((e,t)=>Object(f.jsx)(O,{value:e.selectionId||"NA",children:(null===e||void 0===e?void 0:e.sessionNames[0])||"NA"},t)))]})})}),Object(f.jsx)(h.a,{lg:8,sm:12,xs:24,className:"gx-px-5",children:Object(f.jsx)(m.a.Item,{layout:"vertical",wrapperCol:{span:24},label:Object(f.jsx)("div",{className:"gx-px-2 gx-font-weight-bold gx-fs-md",children:"Username"}),children:Object(f.jsx)(p.a,{name:"username",value:a.fieldsUser.username,onChange:I,placeholder:"Enter username",style:{maxWidth:300}})})}),Object(f.jsx)(h.a,{lg:8,sm:12,xs:24,className:"gx-px-5",children:Object(f.jsx)(m.a.Item,{layout:"vertical",wrapperCol:{span:24},label:Object(f.jsx)("div",{className:"gx-px-2 gx-font-weight-bold gx-fs-md",children:"Amount Range"}),children:Object(f.jsxs)(o.b,{children:[Object(f.jsx)(p.a,{name:"minAmt",value:a.fieldsUser.minAmt,onChange:I,placeholder:"Min amount",style:{maxWidth:145}}),Object(f.jsx)("span",{children:"-"}),Object(f.jsx)(p.a,{name:"maxAmt",value:a.fieldsUser.maxAmt,onChange:I,placeholder:"Max amount",style:{maxWidth:145}})]})})}),Object(f.jsx)(h.a,{lg:8,sm:12,xs:24,className:"gx-px-5",children:Object(f.jsx)(m.a.Item,{layout:"vertical",wrapperCol:{span:24},label:Object(f.jsx)("div",{className:"gx-px-2 gx-font-weight-bold gx-fs-md",children:"Page Size"}),children:Object(f.jsxs)(n.a,{value:a.fieldsUser.size,onChange:e=>v("size",e),style:{maxWidth:300},children:[Object(f.jsx)(O,{value:10,children:"10"}),Object(f.jsx)(O,{value:20,children:"20"}),Object(f.jsx)(O,{value:30,children:"30"}),Object(f.jsx)(O,{value:50,children:"50"}),Object(f.jsx)(O,{value:100,children:"100"})]})})}),Object(f.jsx)(h.a,{lg:8,sm:12,xs:24,className:"gx-px-5",children:Object(f.jsx)(j.a,{type:"primary",onClick:async()=>{await N()},children:"Filters"})})]}),a.selectedIds.length>0&&Object(f.jsx)("div",{style:{marginTop:10},children:"deletedFancy"===a.fieldsUser.fancyType?Object(f.jsxs)(j.a,{type:"primary",onClick:()=>{l((e=>({...e,rollBackModal:!0})))},children:["RollBack Selected (",a.selectedIds.length,")"]}):Object(f.jsxs)(j.a,{type:"primary",danger:!0,onClick:()=>{l((e=>({...e,updateModal:!0})))},children:["Delete Selected (",a.selectedIds.length,")"]})}),Object(f.jsx)(u.a,{className:"gx-table-responsive gx-text-uppercase gx-text-nowrap ",columns:C,dataSource:a.filteredData,rowKey:"_id",rowClassName:e=>e&&"Y"===e.type?"matchdtailsYesBackground":"matchdtailsNoBackground",pagination:{pageSize:a.fieldsUser.size,total:a.total,current:a.pageNo,onChange:async e=>{l((t=>({...t,pageNo:e,isFetch:!0}))),await N(),l((e=>({...e,isFetch:!1})))},showSizeChanger:!1},scroll:{x:1500},bordered:!0,size:"small"}),a.updateModal&&Object(f.jsxs)(c.a,{title:"Confirm Delete",style:{marginTop:16},extra:Object(f.jsx)(j.a,{onClick:()=>{l((e=>({...e,updateModal:!1,fieldsUser:{...e.fieldsUser,password:""}})))},children:"Close"}),children:[Object(f.jsx)(m.a.Item,{label:"Password",required:!0,children:Object(f.jsx)(p.a.Password,{name:"password",value:a.fieldsUser.password,onChange:I,placeholder:"Enter password"})}),Object(f.jsx)(j.a,{type:"primary",danger:!0,onClick:async()=>{const{selectedIds:e,fieldsUser:t}=a,{marketId:s,password:n}=t;if(!n)return void d.b.error("Please enter password");let r={marketId:s,_id:e,password:n,isDeleted:!0,betsType:"fancy",deletedRemark:"byCompany"};l((e=>({...e,isFetch:!0})));let i=await Object(y.b)("decision/betsDelete",r);i&&(d.b.success(i.message),N(),l((e=>({...e,updateModal:!1,fieldsUser:{...e.fieldsUser,password:""},selectedIds:[]})))),l((e=>({...e,isFetch:!1})))},loading:a.isFetch,children:"Confirm Delete"})]}),a.rollBackModal&&Object(f.jsxs)(c.a,{title:"Confirm Rollback",style:{marginTop:16},extra:Object(f.jsx)(j.a,{onClick:()=>{l((e=>({...e,rollBackModal:!1,fieldsUser:{...e.fieldsUser,password:""}})))},children:"Close"}),children:[Object(f.jsx)(m.a.Item,{label:"Password",required:!0,children:Object(f.jsx)(p.a.Password,{name:"password",value:a.fieldsUser.password,onChange:I,placeholder:"Enter password"})}),Object(f.jsx)(j.a,{type:"primary",onClick:async()=>{const{selectedIds:e,fieldsUser:t}=a,{marketId:s,password:n}=t;if(!n)return void d.b.error("Please enter password");let r={marketId:s,_id:e,password:n,isDeleted:!1,betsType:"fancy",deletedRemark:"byCompany"};l((e=>({...e,isFetch:!0})));let i=await Object(y.b)("decision/betsDelete",r);i&&(d.b.success(i.message),N(),l((e=>({...e,rollBackModal:!1,fieldsUser:{...e.fieldsUser,password:""},selectedIds:[]})))),l((e=>({...e,isFetch:!1})))},loading:a.isFetch,children:"Confirm Rollback"})]})]})]})})}));t.default=()=>Object(f.jsx)(v,{})}}]);