(this["webpackJsonpant-pro"]=this["webpackJsonpant-pro"]||[]).push([[64],{615:function(e,t,i){"use strict";i(0);var l=i(882),n=i(1);t.a=e=>{let{currentPage:t,totalItems:i,pageSize:s,onPageChange:a}=e;return Object(n.jsx)("div",{className:"gx-text-right gx-my-2 gx-mx-3 ",children:Object(n.jsx)(l.a,{current:t,total:i,pageSize:s,onChange:e=>{a(e)},showSizeChanger:!1,size:"small"})})}},898:function(e,t,i){"use strict";i.r(t);var l=i(592),n=i(593),s=i(0),a=i(44),o=i(103),d=i(892),c=i(884),r=i(665),u=i(662),x=i(264),m=i(258),v=i.n(m),g=i(22),b=i(11),h=i(7),j=i(223),p=i.n(j),f=i(912),y=i(913),O=i(615),N=i(779),k=(i(871),i(1));const I=e=>{let{data:t,fileName:i}=e;return Object(k.jsx)(o.a,{onClick:()=>(()=>{if(!t||0===t.length)return alert("No data available to generate the PDF"),void console.error("No data available to generate the PDF");const e=new N.default,l=[{header:"Agent",dataKey:"Agent"},{header:"Amount",dataKey:"Amount"},{header:"Client",dataKey:"Client"},{header:"Date",dataKey:"Date"},{header:"Loss",dataKey:"Loss"},{header:"Profit",dataKey:"Profit"},{header:"Rate",dataKey:"Rate"},{header:"Team",dataKey:"Team"}],n=t.map((e=>({Agent:e.Agent,Amount:e.Amount,Client:e.Client,Date:e.Date,Loss:e.Loss,Profit:e.Profit,Rate:e.Rate,Team:e.Team})));e.autoTable({head:[l.map((e=>e.header))],body:n.map((e=>l.map((t=>e[t.dataKey])))),startY:10,styles:{cellHeight:"wrap",lineColor:[0,0,0],lineWidth:.1,fontSize:8},headStyles:{fillColor:!1,textColor:[0,0,0]}}),e.save("".concat(i,".pdf"))})(),className:"gx-border-redius0 gx-bg-flex gx-align-items-center",type:"primary",children:Object(k.jsx)("span",{className:"ml-1 px-1",children:"PDF"})})};var w=i(582),S=i(606);const _=e=>{const[t,i]=e.split(" "),[l,n,s]=t.split("-"),[a,o]=i.split(":"),d=i.includes("PM");let c=parseInt(a,10);return d&&12!==c&&(c+=12),d||12!==c||(c=0),new Date(s,n-1,l,c,o)};var T=e=>{var t;let{handleClose:i,datalist:l,marketId:n}=e;Object(S.useHistory)();const[a,d]=Object(s.useState)([]);let c=JSON.parse(localStorage.getItem("matchList"));return Object(s.useEffect)((()=>{let e=c||l;const t=null===e||void 0===e?void 0:e.map(((e,t)=>({key:e._id,sn:t+1,name:e.matchName,matchDate:e.matchDate,seriesName:e.seriesName,inplay:e.status,matchName:e.matchName,marketId:e.marketId,eventId:e.eventId,cacheUrl:e.cacheUrl}))).sort(((e,t)=>_(e.matchDate)-_(t.matchDate)));d(t)}),[l]),Object(k.jsx)(w.a,{open:!0,title:"All matches",onCancel:i,footer:Object(k.jsx)(o.a,{className:"gx-bg-grey gx-text-white gx-border-redius0",onClick:()=>i(),children:"Close"}),className:"gx-px-3 ",children:Object(k.jsx)("div",{className:"bg-gx-flex  gx-flex-column",children:a&&a.length>0&&(null===(t=a.filter((e=>e.marketId!==n)))||void 0===t?void 0:t.map(((e,t)=>Object(k.jsxs)("a",{className:" gx-px-2 gx-py-2 gx-my-2 gx-w-100 gx-bg-grey gx-flex-column  gx-rounded-xxl gx-font-weight-semi-bold gx-text-white bg-gx-flex gx-justify-content-center gx-align-items-center",href:"/components/matchviewdetail/match-view-details/".concat(e.marketId,"/").concat(e.eventId),children:[Object(k.jsx)("span",{className:"gx-py-1",children:e.matchName}),Object(k.jsx)("span",{className:"gx-py-1",children:e.matchDate})]},t))))})})},C=i(23);var E=()=>{var e,t,i,m,j,N,I;const{marketId:w,eventId:S,cacheUrl:_}=Object(a.useParams)(),[T,E]=Object(s.useState)({tab1:!1,tab2:!1}),L=e=>{E((t=>({...t,[e]:!t[e]})))},[F,B]=Object(s.useState)(2),[P,R]=Object(s.useState)(!1),[M,D]=Object(s.useState)(!1),[A,z]=Object(s.useState)(null),[Y,U]=Object(s.useState)(null),[H,K]=Object(s.useState)(null),[W,V]=Object(s.useState)(),[J,G]=Object(s.useState)(),[q,Q]=Object(s.useState)(),[X,Z]=Object(s.useState)(),[$,ee]=Object(s.useState)(),[te,ie]=Object(s.useState)(),[le,ne]=Object(s.useState)(),[se,ae]=Object(s.useState)(),[oe,de]=Object(s.useState)(""),[ce,re]=Object(s.useState)(!1),[ue,xe]=Object(s.useState)(null),[me,ve]=Object(s.useState)(!1),[ge,be]=Object(s.useState)(1),[he,je]=Object(s.useState)(1),[pe,fe]=Object(s.useState)([]),[ye,Oe]=Object(s.useState)(!1),[Ne,ke]=Object(s.useState)({max:null,min:null}),[Ie,we]=Object(s.useState)({max:null,min:null}),[Se,_e]=Object(s.useState)({max:null,min:null}),[Te,Ce]=Object(s.useState)({max:null,min:null}),[Ee,Le]=Object(s.useState)({max:null,min:null}),[Fe,Be]=Object(s.useState)([]),[Pe,Re]=Object(s.useState)(2),[Me,De]=Object(s.useState)(2),[Ae,ze]=Object(s.useState)(2),Ye=Object(g.d)(),{matchList:Ue,matchDetailsResponse:He,sportsBetsList:Ke,complatedFancy:We,sessionPosition:Ve,oddsPossition:Je,completeDataLoading:Ge,userpositionbymarketId:qe}=(Object(a.useHistory)(),Object(g.e)((e=>e.UserReducer))),Qe=Object(s.useRef)(null),Xe=JSON.parse(localStorage.getItem("matchList")),Ze=null===Xe||void 0===Xe||null===(e=Xe.find((e=>e.marketId===w)))||void 0===e?void 0:e.cacheUrl,$e=null===Xe||void 0===Xe||null===(t=Xe.find((e=>e.marketId===w)))||void 0===t?void 0:t.otherMarketCacheUrl,et=null!==(i=null===Xe||void 0===Xe||null===(m=Xe.find((e=>{let{marketId:t}=e;return t===w})))||void 0===m?void 0:m.scoreIframe)&&void 0!==i?i:null,tt=e=>{B(e)},it=e=>{Re(e)},lt=e=>{De(e)},nt=e=>{ze(e)};Object(s.useEffect)((()=>{rt(Ze),ut($e),st(),ii(),ci(),_t(),at();const e=()=>{"visible"===document.visibilityState&&M?dt():"hidden"===document.visibilityState&&xt()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),xt(),clearInterval(Qe.current)}}),[S,w]),Object(s.useEffect)((()=>{const e=()=>{"visible"===document.visibilityState&&M?dt():"hidden"===document.visibilityState&&xt()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),xt(),clearInterval(Qe.current)}}),[M]);const st=async()=>{let e={marketId:w};Ye(Object(b.K)(e))},at=async()=>{let e={marketId:w};Ye(Object(b.Fc)(e))},ot=Object(s.useRef)(!1);Object(s.useEffect)((()=>{"COMPLETED"!==(null===He||void 0===He?void 0:He.status)||ot.current||(ot.current=!0,window.location.href="/main/dashboard/crm")}),[null===He||void 0===He?void 0:He.status]),Object(s.useEffect)((()=>{clearInterval(Qe.current),rt(Ze),He&&(null!==He&&void 0!==He&&He.socketPerm?dt(He.socketUrl):ct(He.cacheUrl))}),[He]),Object(s.useEffect)((()=>{var e,t,i,l;if(Ke){var n;const{totalFancyCount:e,oddsBetData:t,fancyBetData:i,totalOddsCount:l}=null===Ke||void 0===Ke?void 0:Ke.data;ie(i),ee(i),Q(null===Ke||void 0===Ke||null===(n=Ke.data)||void 0===n?void 0:n.totalFancyCount),G(t),Z(l),V(e)}!ce&&null!==Ke&&void 0!==Ke&&null!==(e=Ke.data)&&void 0!==e&&e.oddsBetData&&fe(null===Ke||void 0===Ke||null===(i=Ke.data)||void 0===i?void 0:i.oddsBetData);ce&&null!==Ke&&void 0!==Ke&&null!==(t=Ke.data)&&void 0!==t&&t.fancyBetData&&fe(null===Ke||void 0===Ke||null===(l=Ke.data)||void 0===l?void 0:l.fancyBetData);if(We){let e=(null===We||void 0===We?void 0:We.map((e=>e.selfProfitLoss))).reduce(((e,t)=>e+t),0);ne(We),ae(-1*e.toFixed(2))}Ve&&ni(Ve),Je&&de(Je)}),[He,Ke,We,Ve,Je,ce]);const dt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===He||void 0===He?void 0:He.socketUrl;if(Y&&Y.connected)return;const t=Object(x.b)(e,{transports:["websocket"],reconnection:!1});t.on("connect",(()=>{D(!0),t.emit("marketByEvent",S)})),t.on(S,(e=>{z(JSON.parse(e))})),null!==He&&void 0!==He&&He.socketPerm&&(t.emit("JoinRoom",w),t.on(w,(e=>{K(JSON.parse(e).result)}))),t.on("disconnect",(()=>{D(!1)})),U(t)},ct=e=>{Qe.current&&clearInterval(Qe.current);const t=setInterval((()=>rt(e)),1e3);Qe.current=t},rt=async e=>{try{var t;const i=await v.a.get(e);K(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.result)}catch(i){K(null),console.error("Error fetching market cache URL:",i)}},ut=async e=>{try{var t;const i=await v.a.get(e);z(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.data)}catch(i){z(null),console.error("Error fetching market cache URL:",i)}},xt=()=>{Y&&(Y.disconnect(),U(null))};Object(s.useEffect)((()=>{const e=null!==He&&void 0!==He&&He.maxMinCoins?JSON.parse(null===He||void 0===He?void 0:He.maxMinCoins):{maximum_match_bet:null,minimum_match_bet:null,maximum_session_bet:null,minimum_session_bet:null};ke({max:null===e||void 0===e?void 0:e.maximum_match_bet,min:null===e||void 0===e?void 0:e.minimum_match_bet}),we({max:null===e||void 0===e?void 0:e.maximum_session_bet,min:null===e||void 0===e?void 0:e.minimum_session_bet}),_e({max:(null===e||void 0===e?void 0:e.maximum_tie_coins)>0?null===e||void 0===e?void 0:e.maximum_tie_coins:null===e||void 0===e?void 0:e.maximum_match_bet,min:null===e||void 0===e?void 0:e.minimum_match_bet}),Ce({max:(null===e||void 0===e?void 0:e.maximum_toss_coins)>0?null===e||void 0===e?void 0:e.maximum_toss_coins:null===e||void 0===e?void 0:e.maximum_match_bet,min:null===e||void 0===e?void 0:e.minimum_match_bet}),Le({max:(null===e||void 0===e?void 0:e.maximum_matchOdds_coins)>0?null===e||void 0===e?void 0:e.maximum_matchOdds_coins:null===e||void 0===e?void 0:e.maximum_match_bet,min:null===e||void 0===e?void 0:e.minimum_match_bet})}),[He]);const[mt,vt]=Object(s.useState)({}),[gt,bt]=Object(s.useState)({}),[ht,jt]=Object(s.useState)({}),[pt,ft]=Object(s.useState)({}),[yt,Ot]=Object(s.useState)({}),[Nt,kt]=Object(s.useState)({});Object(s.useEffect)((()=>{if(qe){let e=[],t={},i={},l={},n={},s={},a={};null!==qe&&void 0!==qe&&qe.oddsPosition&&(e=null===qe||void 0===qe?void 0:qe.oddsPosition,e.filter((e=>"matchOdds"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{t[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.totalPosition.toFixed(2)})),vt(t),e.filter((e=>"matchOdds"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{i[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.Position.toFixed(2)})),bt(i)),null!==qe&&void 0!==qe&&qe.oddsPosition&&(e=null===qe||void 0===qe?void 0:qe.oddsPosition,e.filter((e=>"toss"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{l[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.totalPosition.toFixed(2)})),Ot(l),e.filter((e=>"toss"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{n[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.Position.toFixed(2)})),kt(n)),null!==qe&&void 0!==qe&&qe.oddsPosition&&(e=null===qe||void 0===qe?void 0:qe.oddsPosition,e.filter((e=>"tiedMatch"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{s[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.totalPosition.toFixed(2)})),jt(s),e.filter((e=>"tiedMatch"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{a[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.Position.toFixed(2)})),ft(a))}}),[qe]),Object(s.useEffect)((()=>{ce?Zt(ue):ii();const e=setInterval((()=>{ce?Zt(ue):ii()}),7e3);_t();const t=setInterval((()=>{_t()}),5e3);return()=>{clearInterval(e),clearInterval(t)}}),[ge,20,ce,ue,he]);const It=[];if(H){var wt;const e=null===H||void 0===H||null===(wt=H.team_data)||void 0===wt?void 0:wt.slice().sort(((e,t)=>e.team_name.localeCompare(t.team_name)));null===e||void 0===e||e.forEach(((e,t)=>{var i,l;It.push({key:t,teamName:e.team_name,lgaai:e.lgaai,khaai:e.khaai,selectionid:e.selectionid,position:2===F?oe&&(null===oe||void 0===oe||null===(i=oe.find((t=>(null===t||void 0===t?void 0:t._id)==(null===e||void 0===e?void 0:e.selectionid))))||void 0===i?void 0:i.Position):null===oe||void 0===oe||null===(l=oe.find((t=>(null===t||void 0===t?void 0:t._id)==(null===e||void 0===e?void 0:e.selectionid))))||void 0===l?void 0:l.totalPosition})}))}const St=[{title:Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center ",children:Object(k.jsx)("div",{style:{display:"flex "},children:Object(k.jsxs)("div",{class:"flex bg-pink-400 p-2",children:[Object(k.jsx)("button",{class:"px-5 py-2 bg-white gx-text-black gx-fs-xs gx-text-uppercase gx-font-weight-bold",onClick:()=>tt(2),children:"My Book"}),Object(k.jsx)("button",{class:"px-5 py-2 mr-2 bg-white gx-text-black gx-fs-xs gx-text-uppercase gx-font-weight-bold",onClick:()=>tt(1),children:"Ttl Book"})]})})}),dataIndex:"teamName",className:"matchdtailsBlackBackground",key:"teamName",onHeaderCell:e=>({style:{background:"teamName"===e.key?"gx-bg-grey":""}}),width:"60%",render:(e,t,i)=>Object(k.jsxs)("div",{className:"",children:[Object(k.jsx)("div",{className:" gx-font-weight-semi-bold gx-text-uppercase",children:e}),Object(k.jsx)("div",{className:"".concat(-1*(null===t||void 0===t?void 0:t.position)>0?"gx-text-primary":-1*(null===t||void 0===t?void 0:t.position)<0?"gx-text-red":0==(null===t||void 0===t?void 0:t.position)?"gx-text-black":"gx-text-primary"," "),children:null!==t&&void 0!==t&&t.position?-1*(null===t||void 0===t?void 0:t.position.toFixed(2)):0})]})},{title:"Lagai",dataIndex:"lgaai",key:"lgaai",width:"20%",className:"gx-text-uppercase matchdtailsYesBackground",align:"center",render:(e,t,i)=>Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:(100*Number(e)).toFixed(0)})},{title:"Khai",dataIndex:"khaai",className:"gx-text-uppercase matchdtailsNoBackground",key:"khaai",width:"20%",align:"center",render:(e,t,i)=>Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:(100*Number(e)).toFixed(0)})}],_t=async()=>{try{const e={marketId:w};Ye(Object(b.bb)(e))}catch(e){throw console.error("Error fetching bet lists:",e),e}},Tt=[];if(A){var Ct,Et,Lt,Ft;const e=null===A||void 0===A?void 0:A.find((e=>"Match Odds"===e.marketType));null===He||void 0===He||null===(Ct=He.marketList)||void 0===Ct||null===(Et=Ct.filter((e=>"Match Odds"===e.marketType))[0])||void 0===Et||null===(Lt=Et.selectionIdData)||void 0===Lt||null===(Ft=Lt.slice())||void 0===Ft||Ft.sort(((e,t)=>e.runnerName.localeCompare(t.runnerName)));var Bt;if(e)null===(Bt=e.runners)||void 0===Bt||Bt.forEach(((e,t)=>{var i,l,n,s,a,o,d,c,r,u,x,m,v,g,b,h,j,p,f,y,O,N;Tt.push({key:t,runnerName:null===e||void 0===e?void 0:e.selectionName,selectionId:e.selectionId,lgaaiprice:null===A||void 0===A||null===(i=A.find((e=>"Match Odds"===e.marketType)))||void 0===i||null===(l=i.runners)||void 0===l||null===(n=l.find((t=>t.selectionId===e.selectionId)))||void 0===n||null===(s=n.ex)||void 0===s||null===(a=s.availableToLay[0])||void 0===a?void 0:a.price,lgaaisize:null===A||void 0===A||null===(o=A.find((e=>"Match Odds"===e.marketType)))||void 0===o||null===(d=o.runners)||void 0===d||null===(c=d.find((t=>t.selectionId===e.selectionId)))||void 0===c||null===(r=c.ex)||void 0===r||null===(u=r.availableToLay[0])||void 0===u||null===(x=u.size)||void 0===x?void 0:x.toFixed(2),khaaiprice:null===A||void 0===A||null===(m=A.find((e=>"Match Odds"===e.marketType)))||void 0===m||null===(v=m.runners)||void 0===v||null===(g=v.find((t=>t.selectionId===e.selectionId)))||void 0===g||null===(b=g.ex)||void 0===b||null===(h=b.availableToBack[0])||void 0===h?void 0:h.price,khaaisize:null===A||void 0===A||null===(j=A.find((e=>"Match Odds"===e.marketType)))||void 0===j||null===(p=j.runners)||void 0===p||null===(f=p.find((t=>t.selectionId===e.selectionId)))||void 0===f||null===(y=f.ex)||void 0===y||null===(O=y.availableToBack[0])||void 0===O||null===(N=O.size)||void 0===N?void 0:N.toFixed(2),oddsposition:2===Pe?0!=gt[e.selectionId]?gt[e.selectionId]:0:0!=mt[e.selectionId]?mt[e.selectionId]:0})}))}const Pt=[{title:Object(k.jsxs)("div",{style:{display:"flex "},className:"gx-bg-flex gx-justify-content-between minMax",children:[Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center minMax",children:Object(k.jsxs)("div",{style:{display:"flex "},children:[Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:1===Pe?"#fff":"#eb6d88",color:1===Pe?"black":"white "},onClick:()=>it(1),children:"Ttl Book"}),Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:2===Pe?"#fff":"#eb6d88",color:2===Pe?"black":"white"},onClick:()=>it(2),children:"My Book"})]})}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{style:{textWrap:"nowrap"},children:["Min: ",null===Ee||void 0===Ee?void 0:Ee.min," Max: ",null===Ee||void 0===Ee?void 0:Ee.max]}),Object(k.jsx)("div",{className:"gx-text-center",children:"Match Odds"})]})]}),dataIndex:"runnerName",className:"matchdtailsBlackBackground",key:"runnerName",onHeaderCell:e=>({style:{background:"runnerName"===e.key?"linear-gradient(to right, #ef839b, #63b7f7)":""}}),width:"60%",render:(e,t,i)=>Object(k.jsxs)("div",{className:"",children:[Object(k.jsx)("div",{className:" gx-font-weight-semi-bold gx-text-uppercase",children:e}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold ".concat((null!==t&&void 0!==t&&t.oddsposition?-1*(null===t||void 0===t?void 0:t.oddsposition):0)>=0?"gx-text-primary":"gx-text-red"),children:null!==t&&void 0!==t&&t.oddsposition?-1*(null===t||void 0===t?void 0:t.oddsposition):0})]})},{title:"Lagai",dataIndex:"khaai",className:"matchdtailsYesBackground",onHeaderCell:e=>({style:{backgroundColor:"khaai"===e.key?" #63b7f7":""}}),key:"khaai",width:"20%",align:"center",render:(e,t,i)=>Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold gx-bg-flex gx-flex-column",children:[Object(k.jsx)("span",{children:t.khaaiprice}),Object(k.jsx)("span",{className:"gx-fs-xs",children:t.khaaisize})]})},{title:"Khai",dataIndex:"lgaai",key:"lgaai",width:"20%",onHeaderCell:e=>({style:{backgroundColor:"lgaai"===e.key?"#ef839b ":""}}),className:"matchdtailsNoBackground",align:"center",render:(e,t,i)=>Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold gx-bg-flex gx-flex-column",children:[Object(k.jsx)("span",{children:t.lgaaiprice}),Object(k.jsx)("span",{className:"gx-fs-xs",children:t.lgaaisize})]})}],Rt=[];if(A){const e=null===A||void 0===A?void 0:A.find((e=>"Tied Match"===(null===e||void 0===e?void 0:e.marketType)));var Mt;if(e)null===(Mt=e.runners)||void 0===Mt||Mt.forEach(((e,t)=>{var i,l,n,s,a,o,d,c,r,u,x,m,v,g,b,h,j,p,f,y;Rt.push({key:t,runnerName:null===e||void 0===e?void 0:e.selectionName,selectionId:e.selectionId,lgaaiprice:null===A||void 0===A||null===(i=A.find((e=>"Tied Match"===(null===e||void 0===e?void 0:e.marketType))))||void 0===i||null===(l=i.runners)||void 0===l||null===(n=l.find((t=>t.selectionId===e.selectionId)))||void 0===n||null===(s=n.ex)||void 0===s||null===(a=s.availableToLay[0])||void 0===a?void 0:a.price,lgaaisize:null===A||void 0===A||null===(o=A.find((e=>"Tied Match"===(null===e||void 0===e?void 0:e.marketType))))||void 0===o||null===(d=o.runners)||void 0===d||null===(c=d.find((t=>t.selectionId===e.selectionId)))||void 0===c||null===(r=c.ex)||void 0===r||null===(u=r.availableToLay[0])||void 0===u?void 0:u.size.toFixed(2),khaaiprice:null===A||void 0===A||null===(x=A.find((e=>"Tied Match"===(null===e||void 0===e?void 0:e.marketType))))||void 0===x||null===(m=x.runners)||void 0===m||null===(v=m.find((t=>t.selectionId===e.selectionId)))||void 0===v||null===(g=v.ex)||void 0===g||null===(b=g.availableToBack[0])||void 0===b?void 0:b.price,khaaisize:null===A||void 0===A||null===(h=A.find((e=>"Tied Match"===(null===e||void 0===e?void 0:e.marketType))))||void 0===h||null===(j=h.runners)||void 0===j||null===(p=j.find((t=>t.selectionId===e.selectionId)))||void 0===p||null===(f=p.ex)||void 0===f||null===(y=f.availableToBack[0])||void 0===y?void 0:y.size.toFixed(2),tiedposition:2===Me?0!=pt[null===e||void 0===e?void 0:e.selectionId]?pt[null===e||void 0===e?void 0:e.selectionId]:0:0!=ht[null===e||void 0===e?void 0:e.selectionId]?ht[null===e||void 0===e?void 0:e.selectionId]:0})}))}const Dt=[{title:Object(k.jsxs)("div",{style:{display:"flex "},className:"gx-bg-flex gx-justify-content-between minMax",children:[Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center minMax",children:Object(k.jsxs)("div",{style:{display:"flex "},children:[Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:1===Me?"#fff":"#eb6d88",color:1===Me?"black":"white "},onClick:()=>lt(1),children:"Ttl Book"}),Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:2===Me?"#fff":"#eb6d88",color:2===Me?"black":"white"},onClick:()=>lt(2),children:"My Book"})]})}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{style:{textWrap:"nowrap"},children:["Min: ",null===Se||void 0===Se?void 0:Se.min," Max: ",null===Se||void 0===Se?void 0:Se.max]}),Object(k.jsx)("div",{className:"gx-text-center",children:"Tied Match"})]})]}),dataIndex:"runnerName",className:"matchdtailsBlackBackground",key:"runnerName",onHeaderCell:e=>({style:{background:"runnerName"===e.key?"linear-gradient(to right, #ef839b, #63b7f7)":""}}),width:"60%",render:(e,t,i)=>Object(k.jsxs)("div",{className:"",children:[Object(k.jsx)("div",{className:" gx-font-weight-semi-bold gx-text-uppercase",children:e}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold  ".concat((null!==t&&void 0!==t&&t.tiedposition?-1*(null===t||void 0===t?void 0:t.tiedposition):0)>=0?"gx-text-primary":"gx-text-red"," "),children:null!==t&&void 0!==t&&t.tiedposition?-1*(null===t||void 0===t?void 0:t.tiedposition):0})]})},{title:"Lagai",dataIndex:"khaai",className:"matchdtailsYesBackground",onHeaderCell:e=>({style:{backgroundColor:"khaai"===e.key?" #63b7f7":""}}),key:"khaai",width:"20%",align:"center",render:(e,t,i)=>Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold gx-bg-flex gx-flex-column",children:[Object(k.jsx)("span",{children:t.khaaiprice}),Object(k.jsx)("span",{className:"gx-fs-xs",children:t.khaaisize})]})},{title:"Khai",dataIndex:"lgaai",key:"lgaai",width:"20%",onHeaderCell:e=>({style:{backgroundColor:"lgaai"===e.key?"#ef839b":""}}),className:"matchdtailsNoBackground",align:"center",render:(e,t,i)=>Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold gx-bg-flex gx-flex-column",children:[Object(k.jsx)("span",{children:t.lgaaiprice}),Object(k.jsx)("span",{className:"gx-fs-xs",children:t.lgaaisize})]})}],At=[];if(H){const e=null===H||void 0===H?void 0:H.toss_data;e&&e.forEach(((e,t)=>{var i,l,n,s,a,o,d,c,r,u;At.push({key:t,runnerName:null===e||void 0===e?void 0:e.team_name,selectionId:e.selectionid,lgaaiprice:e.lgaai,lgaaisize:null===A||void 0===A||null===(i=A.find((e=>"To Win the Toss"===e.marketType)))||void 0===i||null===(l=i.runners)||void 0===l||null===(n=l.find((t=>t.selectionId===e.selectionId)))||void 0===n||null===(s=n.ex)||void 0===s||null===(a=s.availableToLay[0])||void 0===a?void 0:a.size.toFixed(2),khaaiprice:e.khaai,khaaisize:null===A||void 0===A||null===(o=A.find((e=>"To Win the Toss"===e.marketType)))||void 0===o||null===(d=o.runners)||void 0===d||null===(c=d.find((t=>t.selectionId===e.selectionId)))||void 0===c||null===(r=c.ex)||void 0===r||null===(u=r.availableToBack[0])||void 0===u?void 0:u.size.toFixed(2),tossposition:2===Ae?0!=Nt[null===e||void 0===e?void 0:e.selectionid]?Nt[null===e||void 0===e?void 0:e.selectionid]:0:0!=yt[null===e||void 0===e?void 0:e.selectionid]?yt[null===e||void 0===e?void 0:e.selectionid]:0})}))}const zt=[{title:Object(k.jsxs)("div",{style:{display:"flex "},className:"gx-bg-flex gx-justify-content-between minMax",children:[Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center minMax",children:Object(k.jsxs)("div",{style:{display:"flex "},children:[Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:1===Ae?"#fff":"#eb6d88",color:1===Ae?"black":"white "},onClick:()=>nt(1),children:"Ttl Book"}),Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:2===Ae?"#fff":"#eb6d88",color:2===Ae?"black":"white"},onClick:()=>nt(2),children:"My Book"})]})}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{style:{textWrap:"nowrap"},children:["Min: ",null===Te||void 0===Te?void 0:Te.min," Max: ",null===Te||void 0===Te?void 0:Te.max]}),Object(k.jsx)("div",{className:"gx-text-center",children:"Toss Data"})]})]}),dataIndex:"runnerName",className:"matchdtailsBlackBackground",key:"runnerName",onHeaderCell:e=>({style:{background:"runnerName"===e.key?"linear-gradient(to right, #ef839b, #63b7f7)":""}}),width:"60%",render:(e,t,i)=>Object(k.jsxs)("div",{className:"",children:[Object(k.jsx)("div",{className:" gx-font-weight-semi-bold gx-text-uppercase",children:e}),Object(k.jsx)("div",{className:" gx-font-weight-semi-bold   ".concat((null!==t&&void 0!==t&&t.tossposition?-1*(null===t||void 0===t?void 0:t.tossposition):0)>=0?"gx-text-primary":"gx-text-red"),children:null!==t&&void 0!==t&&t.tossposition?-1*(null===t||void 0===t?void 0:t.tossposition):0})]})},{title:"Lagai",dataIndex:"khaai",className:"matchdtailsYesBackground",onHeaderCell:e=>({style:{backgroundColor:"khaai"===e.key?"#63b7f7":""}}),key:"khaai",width:"20%",align:"center",render:(e,t,i)=>Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold gx-bg-flex gx-flex-column",children:[Object(k.jsx)("span",{children:100*Number(t.lgaaiprice)}),Object(k.jsx)("span",{className:"gx-fs-xs",children:"100"})]})},{title:"Lay",dataIndex:"lgaai",key:"lgaai",width:"20%",onHeaderCell:e=>({style:{backgroundColor:"lgaai"===e.key?"#ef839b":""}}),className:"matchdtailsNoBackground",align:"center",render:(e,t,i)=>Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold gx-bg-flex gx-flex-column",children:[Object(k.jsx)("span",{children:0}),Object(k.jsx)("span",{className:"gx-fs-xs",children:100})]})}],[Yt,Ut]=Object(s.useState)([]),[Ht,Kt]=Object(s.useState)([]);Object(s.useEffect)((()=>{if(H){const e={STRING:0,ONLY:1,OVER:2,"FALL OF":3,RUN:4,BOUNDARIES:5,HOW:6,BALLS:7},t=H.session.sort(((t,i)=>{const l=e=>e.includes("ONLY")?"ONLY":e.includes("OVER")?"OVER":e.includes("FALL OF")?"FALL OF":e.includes("RUN")?"RUN":e.includes("BOUNDARIES")?"BOUNDARIES":e.includes("HOW")?"HOW":e.includes("BALLS")?"BALLS":"STRING",n=l(t.session_name),s=l(i.session_name);let a=e[n]-e[s];if("OVER"===n&&"OVER"===s){return(parseInt(t.session_name.split(" ")[0])||0)-(parseInt(i.session_name.split(" ")[0])||0)}return a})),i=[],l=[];null===t||void 0===t||t.forEach(((e,t)=>{if("YES"===e.com_perm){const n={key:t,session_name:e.session_name,oddsYes:e.oddsYes,oddsNo:e.oddsNo,runsNo:e.runsNo,runsYes:e.runsYes,running_status:e.running_status,session_id:e.session_id,remark:e.remark?e.remark:null};i.push(n),n.remark&&l.push(n.session_id)}})),Ut(i),Kt(l)}}),[H]);const Wt=[{title:Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center gx-px-1",children:Object(k.jsx)("span",{className:"gx-px-3 gx-py-1 gx-text-uppercase gx-fs-xl gx-font-weight-bold",children:"Fancy (Comm.)"})}),dataIndex:"session_name",key:"session_name",width:"60%",render:(e,t)=>Object(k.jsx)("div",{className:"gx-bg-flex gx-flex-column",children:Object(k.jsxs)("div",{className:"gx-bg-flex gx-my-0 gx-justify-content-between",children:[Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold",children:[e,Object(k.jsx)("div",{className:"gx-fs-sm gx-font-weight-bold gx-text-uppercase",children:"Session Limit : 50000"})]}),Object(k.jsx)(o.a,{size:"large",onClick:()=>$t(t.session_name,t.session_id),children:"B"})]})})},{title:Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center gx-px-1",children:Object(k.jsx)("span",{className:"gx-py-1 gx-text-uppercase gx-fs-lg gx-font-weight-bold",children:"NOT"})}),dataIndex:"oddsNo",key:"oddsNo",width:"20%",align:"center",render:(e,t)=>"SUSPENDED"===t.running_status?{children:Object(k.jsx)("div",{className:"gx-font-weight-bold ",style:{fontSize:"16px",textAlign:"center"},children:"SUSPENDED"}),props:{colSpan:2,className:"matchdtailsYesBackground"}}:{children:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:t.runsNo}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:(100*Number(e)).toFixed(0)})]}),props:{colSpan:1,className:"matchdtailsNoBackground"}}},{title:Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center gx-px-1",children:Object(k.jsx)("span",{className:"gx-py-1 gx-text-uppercase gx-fs-lg gx-font-weight-bold",children:"YES"})}),dataIndex:"oddsYes",align:"center",width:"20%",render:(e,t)=>"SUSPENDED"===t.running_status?{children:null,props:{colSpan:0}}:{children:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:t.runsYes}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:(100*Number(e)).toFixed(0)})]}),props:{className:"matchdtailsYesBackground"}}}],Vt=e=>e.remark?Object(k.jsx)("div",{className:"gx-font-weight-semi-bold gx-text-red",children:Object(k.jsx)("span",{children:e.remark})}):null,[Jt,Gt]=Object(s.useState)([]),[qt,Qt]=Object(s.useState)([]);Object(s.useEffect)((()=>{if(H){const e={STRING:0,ONLY:1,OVER:2,BHAV:3,RUN:4,BOUNDARIES:5,HOW:6,BALLS:7},t=H.session.sort(((t,i)=>{const l=e=>e.includes("ONLY")?"ONLY":e.includes("OVER")?"OVER":e.includes("FALL OF")?"FALL OF":e.includes("RUN")?"RUN":e.includes("BOUNDARIES")?"BOUNDARIES":e.includes("HOW")?"HOW":e.includes("BALLS")?"BALLS":"STRING",n=l(t.session_name),s=l(i.session_name);let a=e[n]-e[s];if("OVER"===n&&"OVER"===s){return(parseInt(t.session_name.split(" ")[0])||0)-(parseInt(i.session_name.split(" ")[0])||0)}return a})),i=[],l=[];null===t||void 0===t||t.forEach(((e,t)=>{if("NO"===e.com_perm){const n={key:t,session_name:e.session_name,oddsYes:e.oddsYes,oddsNo:e.oddsNo,runsNo:e.runsNo,runsYes:e.runsYes,running_status:e.running_status,session_id:e.session_id,remark:e.remark?e.remark:null};i.push(n),n.remark&&l.push(n.session_id)}})),Gt(i),Qt(l)}}),[H]);const Xt=[{title:Object(k.jsxs)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center gx-px-1",children:[Object(k.jsx)("span",{className:"gx-px-3 gx-py-1 gx-bg-primary",children:"No Comm. Fancy"}),Object(k.jsxs)("span",{style:{textWrap:"nowrap"},children:["Min: ",null===Ie||void 0===Ie?void 0:Ie.min,Object(k.jsx)("br",{}),"Max: ",null===Ie||void 0===Ie?void 0:Ie.max]})]}),dataIndex:"session_name",key:"session_name",width:"60%",onHeaderCell:e=>({style:{background:"session_name"===e.key?"linear-gradient(to right, #ef839b, #63b7f7)":""}}),render:(e,t)=>Object(k.jsx)("div",{className:"gx-bg-flex gx-flex-column",children:Object(k.jsxs)("div",{className:"gx-bg-flex gx-my-0",children:[Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:e}),Object(k.jsx)(o.a,{onClick:()=>$t(t.session_name,t.session_id),style:{height:"30px",backgroundColor:"#98D77F",color:"white"},className:"gx-my-0",children:"Book"})]})})},{title:"No",dataIndex:"oddsNo",key:"oddsNo",width:"20%",align:"center",onCell:(e,t)=>({className:"SUSPENDED"===e.running_status?"matchdtailsSuspendBackground":"matchdtailsNoBackground"}),onHeaderCell:e=>({style:{backgroundColor:"oddsNo"===e.key?" #ef839b":""}}),render:(e,t)=>"SUSPENDED"!==t.running_status?Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:t.runsNo}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:(100*Number(e)).toFixed(0)})]}):Object(k.jsx)("div",{className:"gx-font-weight-light gx-py-1",style:{fontSize:"8px"},children:"SUSPENDED"})},{title:"YES",dataIndex:"oddsYes",width:"20%",align:"center",onCell:e=>({className:"SUSPENDED"===e.running_status?"matchdtailsSuspendBackground":"matchdtailsYesBackground"}),key:"oddsYes",onHeaderCell:e=>({style:{backgroundColor:"oddsYes"===e.key?"#63b7f7":""}}),render:(e,t)=>"SUSPENDED"!==t.running_status?Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:t.runsYes}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:(100*Number(e)).toFixed(0)})]}):Object(k.jsx)("div",{className:"gx-fs-xs gx-py-1",style:{fontSize:"8px"},children:"SUSPENDED"})}],Zt=async e=>{const t={fancyBet:!0,isDeclare:!1,marketId:w,selectionId:e,pageNo:he,size:30};Ye(Object(b.tb)(t))},$t=(e,t)=>{Oe(!0),setTimeout((()=>{Oe(!1)}),2e3),re(!0),xe(t),je(1),be(1),Zt(t),ai(t)},ei=[{title:"Rate",dataIndex:"Rate",key:"Rate"},{title:"Amount",dataIndex:"Amount",key:"Amount"},{title:"Type",dataIndex:"Type",key:"Type"},{title:"Team",dataIndex:"Team",key:"Team"},{title:"Client",dataIndex:"Client",key:"Client"},{title:"Agent",dataIndex:"Agent",key:"Agent"},{title:"Date",dataIndex:"Date",key:"Date"},{title:"Loss",dataIndex:"Loss",key:"Loss"},{title:"Profit",dataIndex:"Profit",key:"Profit"}];if(ce)ei.unshift({title:"Runs",dataIndex:"Runs",key:"Runs"});else{const e=ei.findIndex((e=>"Type"===e.title));-1!==e&&ei.splice(e+1,0,{title:"Odds Type",dataIndex:"oddsType",key:"oddsType"})}const ti=(()=>{const e=[];return pe.forEach(((t,i)=>{let l="".concat(t.profit?Number.parseFloat(Math.abs(t.profit)).toFixed(2):0),n="".concat(t.loss?Number.parseFloat(Math.abs(t.loss)).toFixed(2):0);"L"==t.type&&(l=t.positionInfo[t.selectionId],n=-1*t.amount),"K"!=t.type&&"k"!=t.type||(l=t.amount,n=t.amount*t.odds*-1),e.push({key:i,Runs:ce?t.run:"",oddsType:t.oddsType,Rate:Number.parseFloat(100*t.odds).toFixed(2),Amount:Number.parseFloat(t.amount).toFixed(2),Type:ce?"N"===t.type?"NO":"Yes":"L"===t.type?"Lagai":"Khaai",Team:ce?t.sessionName:t.teamName,Client:"".concat(t.userInfo&&t.userInfo.clientName?t.userInfo.clientName:""," ").concat(t.userInfo&&t.userInfo.clientCode?t.userInfo.clientCode:""),Agent:"".concat(t.userInfo&&t.userInfo.creatorName?t.userInfo.creatorName:""),Date:"".concat(t.createdAt?p()(t.createdAt).utcOffset("+05:30").format("DD MMM hh:mm:ss A"):""),Loss:Number.parseFloat(Math.abs(n)).toFixed(2),Profit:Number.parseFloat(Math.abs(l)).toFixed(2)})})),e})(),ii=async()=>{try{const e={isDeclare:!1,oddsBet:!0,marketId:w,pageNo:ge,size:20};Ye(Object(b.tb)(e))}catch(e){throw console.error("Error fetching bet lists:",e),e}};Object(s.useEffect)((()=>{const e=$?$.filter((e=>e.sessionName===me)):[];ie(e)}),[ce,$,me]);const[li,ni]=Object(s.useState)(null),si=li&&(null===(j=Object.entries(li))||void 0===j?void 0:j.map((e=>{let[t,i]=e;return{key:t,run:t,pnl:i}}))),ai=async e=>{let t={marketId:w,selectionId:e};Ye(Object(b.nb)(t))},oi=[{title:"Title",dataIndex:"title",key:"title"},{title:"P&L",dataIndex:"pl",key:"pl"},{title:"Won By",dataIndex:"wonBy",key:"wonBy"},{title:"Net P&L",dataIndex:"netPl",key:"netPl",render:(e,t)=>Object(k.jsx)("div",{className:"".concat(Number(e)>0?"gx-text-green-0":Number(e)<0?"gx-text-red":"gx-text-black"),children:e})},{title:"Action",dataIndex:"action",key:"action",render:(e,t)=>Object(k.jsx)(h.a,{to:"/components/showBetsList/details-show-bet-list/".concat(w,"/").concat(t._id),children:Object(k.jsx)(o.a,{style:{backgroundColor:"#FF5500"},className:"gx-text-white gx-border-redius0",size:"small",children:"Show Bets"})})}];let di=(()=>{const e=[];if(le)return null===le||void 0===le||le.forEach(((t,i)=>{e.push({key:i,title:t.fancyName?t.fancyName:"",pl:t.selfProfitLoss?Number.parseFloat(Math.abs(null===t||void 0===t?void 0:t.selfProfitLoss)).toFixed(2):0,wonBy:t.declareRun?t.declareRun:0,netPl:t.selfProfitLoss?Number.parseFloat(-1*(null===t||void 0===t?void 0:t.selfProfitLoss)).toFixed(2):0,_id:t._id})})),e})();di=null===(N=di)||void 0===N?void 0:N.sort(((e,t)=>{const i=e=>/^\d/.test(e),l=e=>/OVER/.test(e),n=e=>{var t;return parseInt((null===(t=e.match(/^\d+/))||void 0===t?void 0:t[0])||"0",10)},s=e=>/\b1ST\b|\bFIRST\b/.test(e.toUpperCase()),a=e.title,o=t.title,d=i(a),c=i(o),r=l(a),u=l(o),x=s(a),m=s(o);if(x&&!m)return 1;if(!x&&m)return-1;if(d&&c){if(r&&!u)return-1;if(!r&&u)return 1;return n(a)-n(o)}return d&&!c?-1:!d&&c?1:a.localeCompare(o)}));const ci=async()=>{try{let e={marketId:w};await Ye(Object(b.B)(e))}catch(e){throw console.error("Error fetching bet lists:",e),e}},ri=ti&&ti.length>0?[...new Map(ti.map((e=>[e.oddsType,e]))).values()]:[];return Object(k.jsxs)("div",{className:"gx-w-100 gx-px-1",children:[Object(k.jsxs)("div",{className:"gx-bg-grey gx-bg-flex gx-justify-content-between gx-align-items-center gx-px-3 gx-py-2",children:[Object(k.jsx)("div",{className:"gx-fs-lg  gx-font-weight-bold gx-text-white gx-text-uppercase",children:null===He||void 0===He?void 0:He.matchName}),Object(k.jsxs)("div",{className:"gx-bg-flex gx-px-3",children:[Object(k.jsx)("button",{onClick:()=>L("tab2"),type:"button",className:"ant-btn ant-btn-default ant-btn-sm",children:Object(k.jsx)(f.a,{})}),Object(k.jsx)("button",{onClick:()=>L("tab1"),type:"button",className:"ant-btn ant-btn-default ant-btn-sm",children:Object(k.jsx)(y.a,{})})]})]}),Object(k.jsx)(l.a,{children:(null===He||void 0===He?void 0:He.notification)&&Object(k.jsx)(n.a,{className:" gx-text-white gx-fs-md gx-font-weight-semi-bold gx-py-1  gx-text-uppercase",xs:24,style:{backgroundColor:"#73766F",borderTop:"2px solid white"},children:Object(k.jsx)("marquee",{children:He.notification?He.notification:null})})}),T.tab2&&Object(k.jsx)("div",{children:Object(k.jsx)("iframe",{style:{width:"100%",height:280},src:He.tvUrl,title:" ",className:""})}),null!==He&&void 0!==He&&He.scoreIframe||et?Object(k.jsx)("iframe",{style:{width:"100%",height:"100%",border:"none"},src:null!==He&&void 0!==He&&He.scoreIframe?null===He||void 0===He?void 0:He.scoreIframe:et,title:"Score-I-frame",className:""}):null,Object(k.jsx)(l.a,{className:"gx-px-1 gx-py-0",children:Object(k.jsxs)(n.a,{className:"gx-px-0 gx-py-0 gx-mx-0 gx-my-0",xs:24,children:[Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0",size:"small",rowHoverable:!1,title:"",dataSource:It,columns:St,pagination:!1,bordered:!0,style:{marginTop:"16px"}}),(null===C.a||void 0===C.a?void 0:C.a.isMatchOddsFlag)&&(null===He||void 0===He?void 0:He.isMatchOdds)&&(null===A||void 0===A?void 0:A.find((e=>"Match Odds"===e.marketType)))&&Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0",size:"small",rowHoverable:!1,title:"",dataSource:Tt,columns:Pt,pagination:!1,bordered:!0,style:{marginTop:"16px"}}),(null===C.a||void 0===C.a?void 0:C.a.isTiedFlag)&&(null===He||void 0===He?void 0:He.isTieOdds)&&(null===H||void 0===H||null===(I=H.team_data)||void 0===I?void 0:I.length)<=2&&(null===A||void 0===A?void 0:A.find((e=>"Tied Match"===e.marketType)))&&Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0",size:"small",rowHoverable:!1,title:"",dataSource:Rt,columns:Dt,pagination:!1,bordered:!0,style:{marginTop:"16px"}}),(null===He||void 0===He?void 0:He.isToss)&&(null===A||void 0===A?void 0:A.find((e=>"To Win the Toss"===e.marketType)))&&(null===At||void 0===At?void 0:At.length)>0&&Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0",size:"small",rowHoverable:!1,title:"",dataSource:At,columns:zt,pagination:!1,bordered:!0,style:{marginTop:"16px"}}),Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0 gx-table-responsive",size:"small",dataSource:Yt,columns:Wt,pagination:!1,rowKey:"session_id",expandable:{expandedRowRender:Vt,rowExpandable:e=>!!e.remark},expandedRowKeys:Ht,onExpand:(e,t)=>{Kt((i=>e?[...i,t.session_id]:i.filter((e=>e!==t.session_id))))},bordered:!0,style:{marginTop:"16px"}}),(null===C.a||void 0===C.a?void 0:C.a.noFancyMatchDetails)&&Jt&&Jt.length>0&&Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0 gx-table-responsive",size:"small",dataSource:Jt,columns:Xt,pagination:!1,rowKey:"session_id",expandable:{expandedRowRender:Vt,rowExpandable:e=>!!e.remark},expandedRowKeys:qt,onExpand:(e,t)=>{Qt((i=>e?[...i,t.session_id]:i.filter((e=>e!==t.session_id))))},bordered:!0,style:{marginTop:"16px"}})]})}),Object(k.jsxs)(l.a,{className:"gx-px-1 gx-py-0",children:[Object(k.jsxs)("div",{className:"gx-bg-grey gx-w-100 gx-bg-flex gx-align-items-center gx-px-2 gx-py-2 gx-fs-xl gx-text-uppercase  gx-text-white",children:[Object(k.jsx)("div",{children:"Match Stats"}),Object(k.jsx)("div",{className:" gx-py-2 gx-px-1  gx-text-white gx-text-uppercase",children:Object(k.jsxs)(c.a,{className:"gx-text-uppercase  gx-bg-grey  ",placeholder:"Select a OddsType ",showSearch:!0,optionFilterProp:"children",onChange:async function(e,t){if(null===e)return Be([]);const i=null===ti||void 0===ti?void 0:ti.filter((t=>t.oddsType===e));return i.length<0?Be([]):Be(i)},style:{width:150},children:[Object(k.jsx)(u.Option,{className:"gx-text-uppercase",children:" All OddsType "}),ri&&(null===ri||void 0===ri?void 0:ri.length)>0?null===ri||void 0===ri?void 0:ri.map(((e,t)=>Object(k.jsx)(u.Option,{className:"gx-text-uppercase",value:e.oddsType,label:"".concat(e.oddsType),children:e.oddsType},t))):null]})})]}),ye?Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{style:{height:70,display:"flex",justifyContent:"center"},className:"gx-px-3 gx-py-4 gx-w-100",children:Object(k.jsx)(r.a,{tip:"Loading...."})})}):Object(k.jsx)(d.a,{rowClassName:(e,t)=>ce?"NO"===e.Type?"matchdtailsNoBackground":"matchdtailsYesBackground":"Khaai"===e.Type?"matchdtailsNoBackground":"matchdtailsYesBackground",pagination:!1,className:"gx-w-100 gx-text-white gx-text-nowrap",dataSource:Fe&&Fe.length>0?Fe:ti,columns:ei,bordered:!0,scroll:{x:!0}}),ce?Object(k.jsx)(O.a,{currentPage:he,totalItems:q,pageSize:30,onPageChange:e=>{je(e)}}):Object(k.jsx)(O.a,{currentPage:ge,totalItems:X,pageSize:20,onPageChange:e=>{be(e)}})]}),ce&&Object(k.jsx)(l.a,{children:Object(k.jsx)(d.a,{size:"small",pagination:!1,className:"gx-w-100 gx-text-white gx-text-nowrap",dataSource:si,bordered:!0,columns:[{title:"Run",dataIndex:"run",key:"run"},{title:"PnL",dataIndex:"pnl",key:"pnl"}],scroll:{x:!0}})}),Object(k.jsxs)(l.a,{className:"gx-px-1 gx-py-0 gx-my-3",children:[Object(k.jsxs)("div",{className:"gx-bg-grey gx-w-100 gx-bg-flex gx-align-items-center gx-px-2 gx-py-3 gx-mb-1 gx-text-uppercase gx-text-white",children:[Object(k.jsx)("span",{className:"gx-fs-lg",children:"Completed Fancy"})," ",Object(k.jsx)(o.a,{onClick:()=>ci(),type:"default",loading:Ge,size:"small",className:"gx-bg-light-grey btn  ",children:"Refresh"})]}),Object(k.jsx)(d.a,{pagination:!1,className:"gx-text-uppercase gx-w-100",bordered:!0,dataSource:di,columns:oi,scroll:{x:!0},size:"small"})]})]})};var L=()=>{var e,t,i,m,h,j,f,y;const{marketId:N,eventId:w,cacheUrl:_}=Object(a.useParams)(),[C,E]=Object(s.useState)({tab1:!1,tab2:!1}),L=e=>{E((t=>({...t,[e]:!t[e]})))},[F,B]=Object(s.useState)(2),[P,R]=Object(s.useState)(!1),[M,D]=Object(s.useState)(!1),[A,z]=Object(s.useState)(null),[Y,U]=Object(s.useState)(null),[H,K]=Object(s.useState)(null),[W,V]=Object(s.useState)(),[J,G]=Object(s.useState)(),[q,Q]=Object(s.useState)(),[X,Z]=Object(s.useState)(),[$,ee]=Object(s.useState)(),[te,ie]=Object(s.useState)(),[le,ne]=Object(s.useState)(),[se,ae]=Object(s.useState)(""),[oe,de]=Object(s.useState)(!1),[ce,re]=Object(s.useState)(null),[ue,xe]=Object(s.useState)(1),[me,ve]=Object(s.useState)(!1),[ge,be]=Object(s.useState)(1),[he,je]=Object(s.useState)(1),[pe,fe]=Object(s.useState)([]),[ye,Oe]=Object(s.useState)(!1),[Ne,ke]=Object(s.useState)({max:null,min:null}),[Ie,we]=Object(s.useState)({max:null,min:null}),[Se,_e]=Object(s.useState)({max:null,min:null}),[Te,Ce]=Object(s.useState)({max:null,min:null}),[Ee,Le]=Object(s.useState)({max:null,min:null}),[Fe,Be]=Object(s.useState)([]),[Pe,Re]=Object(s.useState)(2),[Me,De]=Object(s.useState)(2),[Ae,ze]=Object(s.useState)(2),[Ye,Ue]=Object(s.useState)(),He=Object(g.d)(),{matchList:Ke,matchDetailsResponse:We,sportsBetsList:Ve,complatedFancy:Je,sessionPosition:Ge,oddsPossition:qe,completeDataLoading:Qe,userpositionbymarketId:Xe,loading:Ze}=Object(g.e)((e=>e.UserReducer)),$e=Object(s.useRef)(null),et=JSON.parse(localStorage.getItem("matchList")),tt=null===et||void 0===et||null===(e=et.find((e=>e.marketId===N)))||void 0===e?void 0:e.cacheUrl,it=null===et||void 0===et||null===(t=et.find((e=>e.marketId===N)))||void 0===t?void 0:t.otherMarketCacheUrl,lt=null!==(i=null===et||void 0===et||null===(m=et.find((e=>{let{marketId:t}=e;return t===N})))||void 0===m?void 0:m.scoreIframe)&&void 0!==i?i:null,nt=e=>{B(e)},st=e=>{Re(e)},at=e=>{De(e)},ot=e=>{ze(e)};Object(s.useEffect)((()=>{"INPLAY"===!(null!==We&&void 0!==We&&We.status)&&(localStorage.removeItem("matchList"),window.location.href="/main/dashboard/crm")}),[null===We||void 0===We?void 0:We.status]),Object(s.useEffect)((()=>{mt(tt),vt(it),dt(),Zt(),ai(),Et(),ct();const e=()=>{"visible"===document.visibilityState&&M?rt():"hidden"===document.visibilityState&&gt()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),gt(),clearInterval($e.current)}}),[w,N]),Object(s.useEffect)((()=>{const e=()=>{"visible"===document.visibilityState&&M?rt():"hidden"===document.visibilityState&&gt()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),gt(),clearInterval($e.current)}}),[M]);const dt=async()=>{let e={marketId:N};He(Object(b.K)(e))},ct=async()=>{let e={marketId:N};He(Object(b.Fc)(e))};Object(s.useEffect)((()=>{clearInterval($e.current),mt(tt),We&&(null!==We&&void 0!==We&&We.socketPerm?rt(We.socketUrl):ut(We.cacheUrl))}),[We]),Object(s.useEffect)((()=>{var e,t,i,l;if(Ve){var n;const{oddsBetData:e,fancyBetData:t,totalOddsCount:i,totalFancyCount:l}=null===Ve||void 0===Ve?void 0:Ve.data;ee(t),Z(t),Ue(null===Ve||void 0===Ve||null===(n=Ve.data)||void 0===n?void 0:n.totalFancyCount),V(e),G(i),Q(l)}!oe&&null!==Ve&&void 0!==Ve&&null!==(e=Ve.data)&&void 0!==e&&e.oddsBetData&&fe(null===Ve||void 0===Ve||null===(i=Ve.data)||void 0===i?void 0:i.oddsBetData);oe&&null!==Ve&&void 0!==Ve&&null!==(t=Ve.data)&&void 0!==t&&t.fancyBetData&&fe(null===Ve||void 0===Ve||null===(l=Ve.data)||void 0===l?void 0:l.fancyBetData);if(Je){let e=(null===Je||void 0===Je?void 0:Je.map((e=>e.selfProfitLoss))).reduce(((e,t)=>e+t),0);ie(Je),ne(-1*e.toFixed(2))}Ge&&ei(Ge),qe&&ae(qe)}),[We,Ve,Je,Ge,qe,oe]);const rt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===We||void 0===We?void 0:We.socketUrl;if(Y&&Y.connected)return;const t=Object(x.b)(e,{transports:["websocket"],reconnection:!1});null!==We&&void 0!==We&&We.socketPerm&&(t.emit("JoinRoom",N),t.on(N,(e=>{K(JSON.parse(e).result)}))),t.on("disconnect",(()=>{D(!1)})),U(t)},ut=e=>{$e.current&&clearInterval($e.current);const t=setInterval((()=>mt(e)),1e3);$e.current=t},xt=Object(s.useRef)(!1);Object(s.useEffect)((()=>{"COMPLETED"!==(null===We||void 0===We?void 0:We.status)||xt.current||(xt.current=!0,window.location.href="/main/dashboard/crm")}),[null===We||void 0===We?void 0:We.status]);const mt=async e=>{try{var t;const i=await v.a.get(e);K(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.result)}catch(i){K(null),console.error("Error fetching market cache URL:",i)}},vt=async e=>{try{var t;const i=await v.a.get(e);z(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.data)}catch(i){z(null),console.error("Error fetching market cache URL:",i)}},gt=()=>{Y&&(Y.disconnect(),U(null))};Object(s.useEffect)((()=>{const e=null!==We&&void 0!==We&&We.maxMinCoins?JSON.parse(null===We||void 0===We?void 0:We.maxMinCoins):{maximum_match_bet:null,minimum_match_bet:null,maximum_session_bet:null,minimum_session_bet:null};ke({max:null===e||void 0===e?void 0:e.maximum_match_bet,min:null===e||void 0===e?void 0:e.minimum_match_bet}),we({max:null===e||void 0===e?void 0:e.maximum_session_bet,min:null===e||void 0===e?void 0:e.minimum_session_bet}),_e({max:(null===e||void 0===e?void 0:e.maximum_tie_coins)>0?null===e||void 0===e?void 0:e.maximum_tie_coins:null===e||void 0===e?void 0:e.maximum_match_bet,min:null===e||void 0===e?void 0:e.minimum_match_bet}),Ce({max:(null===e||void 0===e?void 0:e.maximum_toss_coins)>0?null===e||void 0===e?void 0:e.maximum_toss_coins:null===e||void 0===e?void 0:e.maximum_match_bet,min:null===e||void 0===e?void 0:e.minimum_match_bet}),Le({max:(null===e||void 0===e?void 0:e.maximum_matchOdds_coins)>0?null===e||void 0===e?void 0:e.maximum_matchOdds_coins:null===e||void 0===e?void 0:e.maximum_match_bet,min:null===e||void 0===e?void 0:e.minimum_match_bet})}),[We]);const[bt,ht]=Object(s.useState)({}),[jt,pt]=Object(s.useState)({}),[ft,yt]=Object(s.useState)({}),[Ot,Nt]=Object(s.useState)({}),[kt,It]=Object(s.useState)({}),[wt,St]=Object(s.useState)({});Object(s.useEffect)((()=>{if(Xe){let e=[],t={},i={},l={},n={},s={},a={};null!==Xe&&void 0!==Xe&&Xe.oddsPosition&&(e=null===Xe||void 0===Xe?void 0:Xe.oddsPosition,e.filter((e=>"matchOdds"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{t[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.totalPosition.toFixed(2)})),ht(t),e.filter((e=>"matchOdds"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{i[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.Position.toFixed(2)})),pt(i)),null!==Xe&&void 0!==Xe&&Xe.oddsPosition&&(e=null===Xe||void 0===Xe?void 0:Xe.oddsPosition,e.filter((e=>"toss"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{l[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.totalPosition.toFixed(2)})),It(l),e.filter((e=>"toss"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{n[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.Position.toFixed(2)})),St(n)),null!==Xe&&void 0!==Xe&&Xe.oddsPosition&&(e=null===Xe||void 0===Xe?void 0:Xe.oddsPosition,e.filter((e=>"tiedMatch"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{s[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.totalPosition.toFixed(2)})),yt(s),e.filter((e=>"tiedMatch"===(null===e||void 0===e?void 0:e.oddsType))).forEach((e=>{a[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.Position.toFixed(2)})),Nt(a))}}),[Xe]),Object(s.useEffect)((()=>{oe?Gt(ce):Zt();const e=setInterval((()=>{oe?Gt(ce):Zt()}),7e3);Et();const t=setInterval((()=>{Et()}),5e3);return()=>{clearInterval(e),clearInterval(t)}}),[ge,20,oe,ce,ue]);const _t=[];if(H){var Tt;const e=null===H||void 0===H||null===(Tt=H.team_data)||void 0===Tt?void 0:Tt.slice().sort(((e,t)=>null===e||void 0===e?void 0:e.team_name.localeCompare(null===t||void 0===t?void 0:t.team_name)));null===e||void 0===e||e.forEach(((e,t)=>{var i,l;_t.push({key:t,teamName:e.team_name,lgaai:e.lgaai,khaai:e.khaai,selectionid:e.selectionid,position:2==F?se&&(null===se||void 0===se||null===(i=se.find((t=>(null===t||void 0===t?void 0:t._id)==(null===e||void 0===e?void 0:e.selectionid))))||void 0===i?void 0:i.Position):null===se||void 0===se||null===(l=se.find((t=>(null===t||void 0===t?void 0:t._id)==(null===e||void 0===e?void 0:e.selectionid))))||void 0===l?void 0:l.totalPosition})}))}const Ct=[{title:Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center minMax",children:Object(k.jsxs)("div",{style:{display:"flex "},children:[Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:1===F?"#eb6d88":"#fff",color:1===F?"white":"black "},onClick:()=>nt(1),children:"Ttl Book"}),Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:2===F?"#eb6d88":"#fff",color:2===F?"white":"black"},onClick:()=>nt(2),children:"My Book"})]})}),dataIndex:"teamName",className:"",key:"teamName",onHeaderCell:e=>({style:{background:"teamName"===e.key?"linear-gradient(to right, #fff, #fff)":""}}),width:"60%",render:(e,t,i)=>Object(k.jsxs)("div",{className:"",children:[Object(k.jsx)("div",{className:" gx-font-weight-semi-bold gx-text-uppercase",children:e}),Object(k.jsx)("div",{className:"".concat(-1*(null===t||void 0===t?void 0:t.position)>0?"gx-text-primary":"gx-text-red"," "),children:null!==t&&void 0!==t&&t.position?-1*(null===t||void 0===t?void 0:t.position.toFixed(2)):0})]})},{title:"Lagai",dataIndex:"lgaai",key:"lgaai",width:"20%",onHeaderCell:e=>({style:{backgroundColor:"lgaai"===e.key?"white":"",color:"lgaai"===e.key?"blue":""}}),className:"",align:"center",render:(e,t,i)=>Object(k.jsx)("div",{className:"gx-font-weight-semi-bold gx-text-blue",children:(100*Number(e)).toFixed(0)})},{title:"Khai",dataIndex:"khaai",className:"",onHeaderCell:e=>({style:{backgroundColor:"khaai"===e.key?" white":"",color:"khaai"===e.key?" red":""}}),key:"khaai",width:"20%",align:"center",render:(e,t,i)=>Object(k.jsx)("div",{className:"gx-font-weight-semi-bold gx-text-red",children:(100*Number(e)).toFixed(0)})}],Et=async()=>{try{const e={marketId:N};He(Object(b.bb)(e))}catch(e){throw console.error("Error fetching bet lists:",e),e}},Lt=[];if(A){var Ft,Bt,Pt,Rt;const e=null===A||void 0===A?void 0:A.find((e=>"Match Odds"===e.marketType));null===We||void 0===We||null===(Ft=We.marketList)||void 0===Ft||null===(Bt=Ft.filter((e=>"Match Odds"===e.marketType))[0])||void 0===Bt||null===(Pt=Bt.selectionIdData)||void 0===Pt||null===(Rt=Pt.slice())||void 0===Rt||Rt.sort(((e,t)=>e.runnerName.localeCompare(t.runnerName)));var Mt;if(e)null===(Mt=e.runners)||void 0===Mt||Mt.forEach(((e,t)=>{var i,l,n,s,a,o,d,c,r,u,x,m,v,g,b,h,j,p,f,y,O,N;Lt.push({key:t,runnerName:null===e||void 0===e?void 0:e.selectionName,selectionId:null===e||void 0===e?void 0:e.selectionId,lgaaiprice:null===A||void 0===A||null===(i=A.find((e=>"Match Odds"===e.marketType)))||void 0===i||null===(l=i.runners)||void 0===l||null===(n=l.find((t=>t.selectionId===e.selectionId)))||void 0===n||null===(s=n.ex)||void 0===s||null===(a=s.availableToLay[0])||void 0===a?void 0:a.price,lgaaisize:null===A||void 0===A||null===(o=A.find((e=>"Match Odds"===e.marketType)))||void 0===o||null===(d=o.runners)||void 0===d||null===(c=d.find((t=>t.selectionId===e.selectionId)))||void 0===c||null===(r=c.ex)||void 0===r||null===(u=r.availableToLay[0])||void 0===u||null===(x=u.size)||void 0===x?void 0:x.toFixed(2),khaaiprice:null===A||void 0===A||null===(m=A.find((e=>"Match Odds"===e.marketType)))||void 0===m||null===(v=m.runners)||void 0===v||null===(g=v.find((t=>t.selectionId===e.selectionId)))||void 0===g||null===(b=g.ex)||void 0===b||null===(h=b.availableToBack[0])||void 0===h?void 0:h.price,khaaisize:null===A||void 0===A||null===(j=A.find((e=>"Match Odds"===e.marketType)))||void 0===j||null===(p=j.runners)||void 0===p||null===(f=p.find((t=>t.selectionId===e.selectionId)))||void 0===f||null===(y=f.ex)||void 0===y||null===(O=y.availableToBack[0])||void 0===O||null===(N=O.size)||void 0===N?void 0:N.toFixed(2),oddsposition:2===Pe?0!=bt[null===e||void 0===e?void 0:e.selectionId]?bt[null===e||void 0===e?void 0:e.selectionId]:0:0!=jt[null===e||void 0===e?void 0:e.selectionId]?jt[null===e||void 0===e?void 0:e.selectionId]:0})}))}null===Ee||void 0===Ee||Ee.min,null===Ee||void 0===Ee||Ee.max;const Dt=[];if(A){const e=null===A||void 0===A?void 0:A.find((e=>"Tied Match"===e.marketType));var At;if(e)null===(At=e.runners)||void 0===At||At.forEach(((e,t)=>{var i,l,n,s,a,o,d,c,r,u,x,m,v,g,b,h,j,p,f,y;Dt.push({key:t,runnerName:null===e||void 0===e?void 0:e.selectionName,selectionId:e.selectionId,lgaaiprice:null===A||void 0===A||null===(i=A.find((e=>"Tied Match"===e.marketType)))||void 0===i||null===(l=i.runners)||void 0===l||null===(n=l.find((t=>t.selectionId===e.selectionId)))||void 0===n||null===(s=n.ex)||void 0===s||null===(a=s.availableToLay[0])||void 0===a?void 0:a.price,lgaaisize:null===A||void 0===A||null===(o=A.find((e=>"Tied Match"===e.marketType)))||void 0===o||null===(d=o.runners)||void 0===d||null===(c=d.find((t=>t.selectionId===e.selectionId)))||void 0===c||null===(r=c.ex)||void 0===r||null===(u=r.availableToLay[0])||void 0===u?void 0:u.size.toFixed(2),khaaiprice:null===A||void 0===A||null===(x=A.find((e=>"Tied Match"===e.marketType)))||void 0===x||null===(m=x.runners)||void 0===m||null===(v=m.find((t=>t.selectionId===e.selectionId)))||void 0===v||null===(g=v.ex)||void 0===g||null===(b=g.availableToBack[0])||void 0===b?void 0:b.price,khaaisize:null===A||void 0===A||null===(h=A.find((e=>"Tied Match"===e.marketType)))||void 0===h||null===(j=h.runners)||void 0===j||null===(p=j.find((t=>t.selectionId===e.selectionId)))||void 0===p||null===(f=p.ex)||void 0===f||null===(y=f.availableToBack[0])||void 0===y?void 0:y.size.toFixed(2),tiedposition:2===Me?0!=ft[null===e||void 0===e?void 0:e.selectionId]?ft[null===e||void 0===e?void 0:e.selectionId]:0:0!=Ot[null===e||void 0===e?void 0:e.selectionId]?Ot[null===e||void 0===e?void 0:e.selectionId]:0})}))}null===Se||void 0===Se||Se.min,null===Se||void 0===Se||Se.max;const zt=[];if(H){const e=null===H||void 0===H?void 0:H.toss_data;e&&e.forEach(((e,t)=>{var i,l,n,s,a,o,d,c,r,u;zt.push({key:t,runnerName:null===e||void 0===e?void 0:e.team_name,selectionId:e.selectionid,lgaaiprice:e.lgaai,lgaaisize:null===A||void 0===A||null===(i=A.find((e=>"To Win the Toss"===e.marketType)))||void 0===i||null===(l=i.runners)||void 0===l||null===(n=l.find((t=>t.selectionId===e.selectionId)))||void 0===n||null===(s=n.ex)||void 0===s||null===(a=s.availableToLay[0])||void 0===a?void 0:a.size.toFixed(2),khaaiprice:e.khaai,khaaisize:null===A||void 0===A||null===(o=A.find((e=>"To Win the Toss"===e.marketType)))||void 0===o||null===(d=o.runners)||void 0===d||null===(c=d.find((t=>t.selectionId===e.selectionId)))||void 0===c||null===(r=c.ex)||void 0===r||null===(u=r.availableToBack[0])||void 0===u?void 0:u.size.toFixed(2),tossposition:2===Ae?0!=wt[null===e||void 0===e?void 0:e.selectionid]?wt[null===e||void 0===e?void 0:e.selectionid]:0:0!=kt[null===e||void 0===e?void 0:e.selectionid]?kt[null===e||void 0===e?void 0:e.selectionid]:0})}))}const Yt=[{title:Object(k.jsxs)("div",{style:{display:"flex "},className:"gx-bg-flex gx-justify-content-between minMax",children:[Object(k.jsx)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center minMax",children:Object(k.jsxs)("div",{style:{display:"flex "},children:[Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:1===Ae?"#fff":"#eb6d88",color:1===Ae?"black":"white "},onClick:()=>ot(1),children:"Ttl Book"}),Object(k.jsx)("div",{style:{padding:"6px 8px",cursor:"pointer",backgroundColor:2===Ae?"#fff":"#eb6d88",color:2===Ae?"black":"white"},onClick:()=>ot(2),children:"My Book"})]})}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{style:{textWrap:"nowrap"},children:["Min: ",null===Te||void 0===Te?void 0:Te.min," Max: ",null===Te||void 0===Te?void 0:Te.max]}),Object(k.jsx)("div",{className:"gx-text-center",children:"Toss Data"})]})]}),dataIndex:"runnerName",className:"",key:"runnerName",onHeaderCell:e=>({style:{background:"runnerName"===e.key?"linear-gradient(to right, #fff, #fff)":""}}),width:"60%",render:(e,t,i)=>Object(k.jsxs)("div",{className:"",children:[Object(k.jsx)("div",{className:" gx-font-weight-semi-bold gx-text-uppercase",children:e}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold ".concat((t.tossposition?-1*t.tossposition:0)>=0?"gx-text-primary":"gx-text-red"),children:null!==t&&void 0!==t&&t.tossposition?-1*t.tossposition:0})]})},{title:"Lagai",dataIndex:"khaai",className:"matchdtailsYesBackground",onHeaderCell:e=>({style:{backgroundColor:"khaai"===e.key?"white":"",color:"khaai"===e.key?"blue":""}}),key:"khaai",width:"20%",align:"center",render:(e,t,i)=>Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold gx-bg-flex gx-flex-column gx-text-blue",children:[Object(k.jsx)("span",{children:100*Number(t.khaaiprice)}),Object(k.jsx)("span",{className:"gx-fs-xs",children:t.khaaisize})]})},{title:"Lay",dataIndex:"lgaai",key:"lgaai",width:"20%",onHeaderCell:e=>({style:{backgroundColor:"lgaai"===e.key?"white":"",color:"lgaai"===e.key?"red":""}}),className:"",align:"center",render:(e,t,i)=>Object(k.jsxs)("div",{className:"gx-font-weight-semi-bold gx-bg-flex gx-flex-column gx-text-red",children:[Object(k.jsx)("span",{children:100*Number(t.lgaaiprice)}),Object(k.jsx)("span",{className:"gx-fs-xs",children:t.lgaaisize})]})}],[Ut,Ht]=Object(s.useState)([]),[Kt,Wt]=Object(s.useState)([]);Object(s.useEffect)((()=>{if(H){const e={STRING:0,ONLY:1,OVER:2,"FALL OF":3,RUN:4,BOUNDARIES:5,HOW:6,BALLS:7},t=H.session.sort(((t,i)=>{const l=e=>e.includes("ONLY")?"ONLY":e.includes("OVER")?"OVER":e.includes("FALL OF")?"FALL OF":e.includes("RUN")?"RUN":e.includes("BOUNDARIES")?"BOUNDARIES":e.includes("HOW")?"HOW":e.includes("BALLS")?"BALLS":"STRING",n=l(t.session_name),s=l(i.session_name);let a=e[n]-e[s];if("OVER"===n&&"OVER"===s){return(parseInt(t.session_name.split(" ")[0])||0)-(parseInt(i.session_name.split(" ")[0])||0)}return a})),i=[],l=[];null===t||void 0===t||t.forEach(((e,t)=>{if("YES"===e.com_perm){const n={key:t,session_name:e.session_name,oddsYes:e.oddsYes,oddsNo:e.oddsNo,runsNo:e.runsNo,runsYes:e.runsYes,running_status:e.running_status,session_id:e.session_id,remark:e.remark?e.remark:null};i.push(n),n.remark&&l.push(n.session_id)}})),Ht(i),Wt(l)}}),[H]);const Vt=[{title:Object(k.jsxs)("div",{className:"gx-bg-flex gx-justify-content-between gx-align-items-center gx-px-1",children:[Object(k.jsx)("span",{className:"gx-px-3 gx-py-1 gx-bg-primary",children:"Fancy"}),Object(k.jsxs)("span",{style:{textWrap:"nowrap"},children:["Min: ",null===Ie||void 0===Ie?void 0:Ie.min,Object(k.jsx)("br",{}),"Max: ",null===Ie||void 0===Ie?void 0:Ie.max]})]}),dataIndex:"session_name",key:"session_name",width:"60%",onHeaderCell:e=>({style:{background:"session_name"===e.key?"linear-gradient(to right, #fff, #fff)":""}}),render:(e,t)=>Object(k.jsx)("div",{className:"gx-bg-flex gx-flex-column",children:Object(k.jsxs)("div",{className:"gx-bg-flex gx-my-0",children:[Object(k.jsx)("div",{className:"gx-font-weight-semi-bold",children:e}),Object(k.jsx)(o.a,{onClick:()=>qt(t.session_name,t.session_id),style:{height:"30px",backgroundColor:"#98D77F",color:"white"},className:"gx-my-0",children:"Book"})]})})},{title:"No",dataIndex:"oddsNo",key:"oddsNo",width:"20%",align:"center",onCell:(e,t)=>({className:(e.running_status,"")}),onHeaderCell:e=>({style:{backgroundColor:"oddsNo"===e.key?" white":"",color:"oddsNo"===e.key?" red":""}}),render:(e,t)=>"SUSPENDED"!==t.running_status?Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"gx-font-weight-semi-bold gx-text-red",children:t.runsNo}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold gx-text-red",children:(100*Number(e)).toFixed(0)})]}):Object(k.jsx)("div",{className:"gx-font-weight-light gx-py-1",style:{fontSize:"8px"},children:"SUSPENDED"})},{title:"Yes",dataIndex:"oddsYes",width:"20%",align:"center",onCell:e=>({className:(e.running_status,"")}),key:"oddsYes",onHeaderCell:e=>({style:{backgroundColor:"oddsYes"===e.key?"white":"",color:"oddsYes"===e.key?"blue":""}}),render:(e,t)=>"SUSPENDED"!==t.running_status?Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"gx-font-weight-semi-bold gx-text-blue",children:t.runsYes}),Object(k.jsx)("div",{className:"gx-font-weight-semi-bold gx-text-blue",children:(100*Number(e)).toFixed(0)})]}):Object(k.jsx)("div",{className:"gx-fs-xs gx-py-1",style:{fontSize:"8px"},children:"SUSPENDED"})}],Jt=[];if(H){const e=H.session.sort(((e,t)=>{const i=e=>e.trim().charAt(0),l=i(e.session_name),n=i(t.session_name),s=/\d/.test(l),a=/\d/.test(n);return s&&!a?-1:!s&&a?1:s&&a?parseInt(l,10)-parseInt(n,10):e.session_name.localeCompare(t.session_name)}));null===e||void 0===e||e.forEach(((e,t)=>{"NO"===e.com_perm&&Jt.push({key:t,session_name:e.session_name,oddsYes:e.oddsYes,oddsNo:e.oddsNo,runsNo:e.runsNo,runsYes:e.runsYes,running_status:e.running_status,session_id:e.session_id,remark:e.remark?e.remark:null})}))}null===Ie||void 0===Ie||Ie.min,null===Ie||void 0===Ie||Ie.max;const Gt=async e=>{const t={fancyBet:!0,isDeclare:!1,marketId:N,selectionId:e,pageNo:ue,size:30};He(Object(b.tb)(t))},qt=(e,t)=>{Oe(!0),setTimeout((()=>{Oe(!1)}),2e3),de(!0),re(t),xe(1),be(1),Gt(t),li(t)},Qt=[{title:"Rate",dataIndex:"Rate",key:"Rate"},{title:"Amount",dataIndex:"Amount",key:"Amount"},{title:"Type",dataIndex:"Type",key:"Type"},{title:"Team",dataIndex:"Team",key:"Team"},{title:"Client",dataIndex:"Client",key:"Client"},{title:"Agent",dataIndex:"Agent",key:"Agent"},{title:"Date",dataIndex:"Date",key:"Date"},{title:"Loss",dataIndex:"Loss",key:"Loss"},{title:"Profit",dataIndex:"Profit",key:"Profit"}];if(oe)Qt.unshift({title:"Runs",dataIndex:"Runs",key:"Runs"});else{const e=Qt.findIndex((e=>"Type"===e.title));-1!==e&&Qt.splice(e+1,0,{title:"Odds Type",dataIndex:"oddsType",key:"oddsType"})}const Xt=(()=>{const e=[];return pe.forEach(((t,i)=>{let l="".concat(t.profit?Number.parseFloat(Math.abs(t.profit)).toFixed(2):0),n="".concat(t.loss?Number.parseFloat(Math.abs(t.loss)).toFixed(2):0);"L"==t.type&&(l=t.positionInfo[t.selectionId],n=-1*t.amount),"K"!=t.type&&"k"!=t.type||(l=t.amount,n=t.amount*t.odds*-1),e.push({key:i,Runs:oe?t.run:"",oddsType:t.oddsType,Rate:Number.parseFloat(100*t.odds).toFixed(2),Amount:Number.parseFloat(t.amount).toFixed(2),Type:oe?"N"===t.type?"NO":"Yes":"L"===t.type?"Lagai":"Khaai",Team:oe?t.sessionName:t.teamName,Client:"".concat(t.userInfo&&t.userInfo.clientName?t.userInfo.clientName:""," ").concat(t.userInfo&&t.userInfo.clientCode?t.userInfo.clientCode:""),Agent:"".concat(t.userInfo&&t.userInfo.creatorName?t.userInfo.creatorName:""),Date:"".concat(t.createdAt?p()(t.createdAt).utcOffset("+05:30").format("DD MMM hh:mm:ss A"):""),Loss:Number.parseFloat(Math.abs(n)).toFixed(2),Profit:Number.parseFloat(Math.abs(l)).toFixed(2)})})),e})(),Zt=async()=>{try{const e={isDeclare:!1,oddsBet:!0,marketId:N,pageNo:ge,size:20};He(Object(b.tb)(e))}catch(e){throw console.error("Error fetching bet lists:",e),e}};Object(s.useEffect)((()=>{const e=X?X.filter((e=>e.sessionName===me)):[];ee(e)}),[oe,X,me]);const[$t,ei]=Object(s.useState)(null),ti=$t&&(null===(h=Object.entries($t))||void 0===h?void 0:h.map((e=>{let[t,i]=e;return{key:t,run:t,pnl:i}}))),ii=[{title:"Run",dataIndex:"run",key:"run"},{title:"PnL",dataIndex:"pnl",render:(e,t)=>Object(k.jsx)("div",{className:"".concat(Number(null===t||void 0===t?void 0:t.pnl)>0?"gx-text-green-0":Number(null===t||void 0===t?void 0:t.pnl)<0?"gx-text-red":"gx-text-black"),children:null===t||void 0===t?void 0:t.pnl})}],li=async e=>{let t={marketId:N,selectionId:e};He(Object(b.nb)(t))},ni=[{title:"Title",dataIndex:"title",key:"title"},{title:"P&L",dataIndex:"pl",key:"pl"},{title:"Won By",dataIndex:"wonBy",key:"wonBy"},{title:"Net P&L",dataIndex:"netPl",key:"netPl",render:(e,t)=>Object(k.jsx)("div",{className:"".concat(Number(e)>0?"gx-text-green-0":Number(e)<0?"gx-text-red":"gx-text-black"),children:e})},{title:"Action",dataIndex:"action",key:"action",render:(e,t)=>Object(k.jsx)(S.Link,{to:"/components/showBetsList/details-show-bet-list/".concat(N,"/").concat(t._id),children:Object(k.jsx)(o.a,{style:{backgroundColor:"#FF5500"},className:"gx-text-white gx-border-redius0",size:"small",children:"Show Bets"})})}];let si=(()=>{const e=[];if(te)return null===te||void 0===te||te.forEach(((t,i)=>{e.push({key:i,title:t.fancyName?t.fancyName:"",pl:t.selfProfitLoss?Number.parseFloat(Math.abs(null===t||void 0===t?void 0:t.selfProfitLoss)).toFixed(2):0,wonBy:t.declareRun?t.declareRun:0,netPl:t.selfProfitLoss?Number.parseFloat(-1*(null===t||void 0===t?void 0:t.selfProfitLoss)).toFixed(2):0,_id:t._id})})),e})();si=null===(j=si)||void 0===j?void 0:j.sort(((e,t)=>{const i=e=>/^\d/.test(e),l=e=>/OVER/.test(e),n=e=>{var t;return parseInt((null===(t=e.match(/^\d+/))||void 0===t?void 0:t[0])||"0",10)},s=e=>/\b1ST\b|\bFIRST\b/.test(e.toUpperCase()),a=e.title,o=t.title,d=i(a),c=i(o),r=l(a),u=l(o),x=s(a),m=s(o);if(x&&!m)return 1;if(!x&&m)return-1;if(d&&c){if(r&&!u)return-1;if(!r&&u)return 1;return n(a)-n(o)}return d&&!c?-1:!d&&c?1:a.localeCompare(o)}));const ai=async()=>{try{let e={marketId:N};await He(Object(b.B)(e))}catch(e){throw console.error("Error fetching bet lists:",e),e}},oi=Xt&&Xt.length>0?[...new Map(Xt.map((e=>[e.oddsType,e]))).values()]:[];return Object(k.jsxs)("div",{className:"gx-px-1  gx-w-100 ",children:[Object(k.jsxs)(l.a,{style:{backgroundColor:"#73766F"},className:"gx-bg-flex gx-justify-content-start gx-align-items-center gx-px-2 gx-py-1 ",children:[Object(k.jsx)("span",{onClick:()=>L("tab1"),className:"gx-bg-white gx-px-2 gx-py-1 gx-mr-2",children:"FS"}),Object(k.jsx)("img",{onClick:()=>L("tab2"),style:{width:"25px"},src:"/assets/images/tv.png",alt:"tv.png",className:"gx-bg-white gx-py-1 gx-mr-2"})]}),Object(k.jsx)(l.a,{children:(null===We||void 0===We?void 0:We.notification)&&Object(k.jsx)(n.a,{className:" gx-text-white gx-fs-md gx-font-weight-semi-bold gx-py-1  gx-text-uppercase",xs:24,style:{backgroundColor:"#73766F",borderTop:"2px solid white"},children:Object(k.jsx)("marquee",{children:We.notification?We.notification:null})})}),null!==We&&void 0!==We&&We.scoreIframe||lt?Object(k.jsx)(l.a,{style:{height:"".concat(C.tab1?"270px":"110px")},className:"",children:Object(k.jsx)("iframe",{style:{width:"100%",height:"100%",border:"none"},src:null!==We&&void 0!==We&&We.scoreIframe?null===We||void 0===We?void 0:We.scoreIframe:lt,title:"Score-I-frame",className:""})}):null,C.tab2&&Object(k.jsx)(l.a,{className:"gx-px-0 gx-py-0",children:Object(k.jsx)(n.a,{className:"gx-px-0 gx-py-0 gx-mx-0 gx-my-0",xs:24,children:Object(k.jsx)("div",{children:Object(k.jsx)("iframe",{style:{width:"100%",height:250},src:We.tvUrl,title:" ",className:""})})})}),Object(k.jsx)(l.a,{className:"gx-px-0 gx-py-0",children:Object(k.jsxs)(n.a,{className:"gx-px-0 gx-py-0 gx-mx-0 gx-my-0",xs:24,children:[Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0",size:"small",rowHoverable:!1,title:"",dataSource:_t,columns:Ct,pagination:!1,bordered:!0,style:{marginTop:"16px"}}),(null===We||void 0===We?void 0:We.isToss)&&(null===A||void 0===A?void 0:A.find((e=>"To Win the Toss"===e.marketType)))&&(null===zt||void 0===zt?void 0:zt.length)>0&&Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0",size:"small",rowHoverable:!1,title:"",dataSource:zt,columns:Yt,pagination:!1,bordered:!0,style:{marginTop:"16px"}}),Object(k.jsx)(d.a,{className:"gx-w-100 gx-mx-0 gx-my-0 gx-table-responsive",size:"small",dataSource:Ut,columns:Vt,pagination:!1,rowKey:"session_id",expandable:{expandedRowRender:e=>e.remark?Object(k.jsx)("div",{className:"gx-font-weight-semi-bold gx-text-red",children:Object(k.jsx)("span",{children:e.remark})}):null,rowExpandable:e=>!!e.remark},expandedRowKeys:Kt,onExpand:(e,t)=>{Wt((i=>e?[...i,t.session_id]:i.filter((e=>e!==t.session_id))))},bordered:!0,style:{marginTop:"16px"}})]})}),Object(k.jsxs)(l.a,{className:"gx-px-0 gx-py-0",children:[Object(k.jsxs)("div",{className:"gx-bg-grey gx-w-100 gx-bg-flex gx-align-items-center gx-px-2 gx-py-2  gx-text-white",children:[oe?"Fancy Bets":"Match Bets"," ",oe?["- ".concat(pe?pe.length:"")]:["- ".concat(J||0)],oe&&Object(k.jsx)(o.a,{onClick:()=>{de(),re(null),xe(1),be(1)},className:"gx-my-0  gx-bg-primary gx-text-white",children:"Match Bets"}),Object(k.jsxs)("div",{className:" gx-py-2 gx-px-3  gx-text-white gx-text-uppercase",children:[Object(k.jsx)("span",{className:"gx-ml-2 gx-font-weight-semi-bold",children:"OddsType"}),Object(k.jsxs)(c.a,{className:" gx-pl-2  gx-bg-grey  ",placeholder:"Select a OddsType ",showSearch:!0,optionFilterProp:"children",onChange:async function(e,t){if(null===e)return Be([]);const i=null===Xt||void 0===Xt?void 0:Xt.filter((t=>t.oddsType===e));return i.length<0?Be([]):Be(i)},style:{width:150},children:[Object(k.jsx)(u.Option,{className:"",children:" All OddsType "}),oi&&oi.length>0?null===oi||void 0===oi?void 0:oi.map(((e,t)=>Object(k.jsx)(u.Option,{className:"",value:e.oddsType,label:"".concat(e.oddsType),children:e.oddsType},t))):null]})]}),Object(k.jsx)(I,{data:Xt,fileName:"matchbetlist"})]}),ye?Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{style:{height:70,display:"flex",justifyContent:"center"},className:"gx-px-3 gx-py-4 gx-w-100",children:Object(k.jsx)(r.a,{tip:"Loading...."})})}):Object(k.jsx)(d.a,{rowClassName:(e,t)=>oe?"NO"===e.Type?"matchdtailsNoBackground":"matchdtailsYesBackground":"Khaai"===e.Type?"matchdtailsNoBackground":"matchdtailsYesBackground",pagination:!1,className:"gx-w-100 gx-text-white gx-text-nowrap",dataSource:Fe&&Fe.length>0?Fe:Xt,columns:Qt,bordered:!0,scroll:{x:!0}}),oe?Object(k.jsx)(O.a,{currentPage:ue,totalItems:Ye,pageSize:30,onPageChange:e=>{xe(e)}}):Object(k.jsx)(O.a,{currentPage:ge,totalItems:J,pageSize:20,onPageChange:e=>{be(e)}})]}),oe&&Object(k.jsx)(l.a,{children:Object(k.jsx)(d.a,{size:"small",pagination:!1,className:"gx-w-100 gx-text-white gx-text-nowrap",dataSource:ti,bordered:!0,columns:ii,scroll:{x:!0}})}),Object(k.jsxs)(l.a,{className:"gx-px-0 gx-py-0 gx-my-3",children:[Object(k.jsxs)("div",{className:"gx-bg-grey gx-w-100 gx-bg-flex gx-align-items-center gx-px-2 gx-py-3 gx-mb-1 gx-text-white",children:[Object(k.jsx)("span",{className:"gx-fs-xl",children:"Completed Fancy [".concat(null!==(f=si)&&void 0!==f&&f.length?null===(y=si)||void 0===y?void 0:y.length:0,"]")})," ",Object(k.jsx)(o.a,{onClick:()=>ai(),type:"primary",loading:Qe,className:"gx-my-0  ",children:"Refresh"})]}),Object(k.jsx)(n.a,{xl:10,xs:24,children:Object(k.jsxs)("div",{className:"gx-fs-lg gx-py-2 gx-font-weight-semi-bold",children:["Total :",Object(k.jsxs)("span",{className:"gx-px-2 ".concat(le>0?"gx-text-green-0":le<0?"gx-text-red":"gx-text-black"),children:[" ",le]})]})}),Object(k.jsx)(d.a,{pagination:!1,className:" gx-w-100",bordered:!0,dataSource:si,columns:ni,scroll:{x:!0},size:"small"})]}),Object(k.jsxs)(l.a,{className:"gx-px-0 gx-py-0 gx-my-1 gx-justify-content-center",children:[Object(k.jsx)(o.a,{onClick:()=>R(!0),className:"gx-my-0  gx-bg-grey gx-text-white gx-font-weight-semi-bold ",children:"All Matches"}),P&&Object(k.jsx)(T,{handleClose:()=>{R(!1)},datalist:Ke,marketId:N})]})]})};t.default=()=>Object(k.jsx)(l.a,{justify:"center",children:Object(k.jsx)(n.a,{xs:24,children:"SKY99"===C.a.domainName?Object(k.jsx)(L,{}):Object(k.jsx)(E,{})})})}}]);