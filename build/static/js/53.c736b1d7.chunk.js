(this["webpackJsonpant-pro"]=this["webpackJsonpant-pro"]||[]).push([[53],{257:function(e,t,a){"use strict";a.r(t);t.default=function(e,t){}},606:function(e,t,a){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var r=a(44),c=n(a(0)),s=a(71);a(30),a(257);var l=n(a(82));function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],0<=t.indexOf(a)||(r[a]=e[a]);return r}var m=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).history=s.createBrowserHistory(t.props),t}return o(t,e),t.prototype.render=function(){return c.createElement(r.Router,{history:this.history,children:this.props.children})},t}(c.Component),p=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).history=s.createHashHistory(t.props),t}return o(t,e),t.prototype.render=function(){return c.createElement(r.Router,{history:this.history,children:this.props.children})},t}(c.Component),x=function(e,t){return"function"==typeof e?e(t):e},b=function(e,t){return"string"==typeof e?s.createLocation(e,null,null,t):e},j=function(e){return e},g=c.forwardRef;void 0===g&&(g=j);var h=g((function(e,t){var a=e.innerRef,n=e.navigate,r=e.onClick,s=d(e,["innerRef","navigate","onClick"]),l=s.target,o=i({},s,{onClick:function(t){try{r&&r(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||l&&"_self"!==l||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),n())}});return o.ref=j!==g&&t||a,c.createElement("a",o)})),f=g((function(e,t){var a=e.component,n=void 0===a?h:a,o=e.replace,u=e.to,m=e.innerRef,p=d(e,["component","replace","to","innerRef"]);return c.createElement(r.__RouterContext.Consumer,null,(function(e){e||l(!1);var a=e.history,r=b(x(u,e.location),e.location),d=r?a.createHref(r):"",h=i({},p,{href:d,navigate:function(){var t=x(u,e.location),n=s.createPath(e.location)===s.createPath(b(t));(o||n?a.replace:a.push)(t)}});return j!==g?h.ref=t||m:h.innerRef=m,c.createElement(n,h)}))})),y=function(e){return e},O=c.forwardRef;void 0===O&&(O=y);var v=O((function(e,t){var a=e["aria-current"],n=void 0===a?"page":a,s=e.activeClassName,o=void 0===s?"active":s,u=e.activeStyle,m=e.className,p=e.exact,j=e.isActive,g=e.location,h=e.sensitive,v=e.strict,N=e.style,w=e.to,T=e.innerRef,C=d(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return c.createElement(r.__RouterContext.Consumer,null,(function(e){e||l(!1);var a=g||e.location,s=b(x(w,a),a),d=s.pathname,k=d&&d.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),P=k?r.matchPath(a.pathname,{path:k,exact:p,sensitive:h,strict:v}):null,R=!!(j?j(P,a):P),I="function"==typeof m?m(R):m,S="function"==typeof N?N(R):N;R&&(I=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return e})).join(" ")}(I,o),S=i({},S,u));var A=i({"aria-current":R&&n||null,className:I,style:S,to:s},C);return y!==O?A.ref=t||T:A.innerRef=T,c.createElement(f,A)}))}));Object.defineProperty(t,"MemoryRouter",{enumerable:!0,get:function(){return r.MemoryRouter}}),Object.defineProperty(t,"Prompt",{enumerable:!0,get:function(){return r.Prompt}}),Object.defineProperty(t,"Redirect",{enumerable:!0,get:function(){return r.Redirect}}),Object.defineProperty(t,"Route",{enumerable:!0,get:function(){return r.Route}}),Object.defineProperty(t,"Router",{enumerable:!0,get:function(){return r.Router}}),Object.defineProperty(t,"StaticRouter",{enumerable:!0,get:function(){return r.StaticRouter}}),Object.defineProperty(t,"Switch",{enumerable:!0,get:function(){return r.Switch}}),Object.defineProperty(t,"generatePath",{enumerable:!0,get:function(){return r.generatePath}}),Object.defineProperty(t,"matchPath",{enumerable:!0,get:function(){return r.matchPath}}),Object.defineProperty(t,"useHistory",{enumerable:!0,get:function(){return r.useHistory}}),Object.defineProperty(t,"useLocation",{enumerable:!0,get:function(){return r.useLocation}}),Object.defineProperty(t,"useParams",{enumerable:!0,get:function(){return r.useParams}}),Object.defineProperty(t,"useRouteMatch",{enumerable:!0,get:function(){return r.useRouteMatch}}),Object.defineProperty(t,"withRouter",{enumerable:!0,get:function(){return r.withRouter}}),t.BrowserRouter=m,t.HashRouter=p,t.Link=f,t.NavLink=v},607:function(e,t,a){"use strict";var n=a(103),r=a(606),c=a(1);t.a=()=>{const e=Object(r.useHistory)();return Object(c.jsx)(n.a,{onClick:()=>{e.goBack()},type:"default",className:"gx-px-2 gx-text-black",children:"Back"})}},903:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(899),c=a(592),s=a(593),l=a(892),i=a(44),o=a(607),u=a(22),d=a(11),m=a(67),p=a(222),x=a(582),b=a(256),j=a(336),g=a(884),h=a(893),f=a(103),y=a(223),O=a.n(y),v=a(1);var N=e=>{let{visible:t,handleClose:a,userLedgerListData:r,data:l}=e;const[o,m]=Object(n.useState)([]),[y,N]=Object(n.useState)(0),[w,T]=Object(n.useState)({}),[C,k]=Object(n.useState)({}),[P]=p.a.useForm(),[R,I]=Object(n.useState)({}),[S,A]=Object(n.useState)(null),[L,D]=Object(n.useState)([]),[_,E]=Object(n.useState)(!1),[U,F]=Object(n.useState)({client:"",collection:"",date:O()(),amount:"",paymentType:"dena",remark:"",ledgerType:""}),{usertype:z}=Object(i.useParams)(),H=Object(u.d)(),M=(e,t)=>{F((a=>({...a,[e]:t})))};Object(n.useEffect)((()=>{if(r){const{calAmount:e,creditAmount:t,debitAmount:a,ledgerData:n}=r,c=n.map(((e,t)=>({key:"".concat(e.userId,"-").concat(t),userID:"".concat(e.userId),createdAt:e.createdAt,eventName:e.eventName,balance:e.balance,debit:e.amount>0?e.amount:0,credit:e.amount<0?e.amount:0,ledgerType:e.ledgerType,remark:e.remark,userType:e.userType})));m(c),N(e),T(t),k(a)}}),[r]);return Object(v.jsx)(x.a,{title:"Cash Transaction",onCancel:()=>a(),open:t,footer:null,width:750,className:"gx-px-3",children:Object(v.jsx)("div",{className:"gx-px-2  gx-bg-flex",children:Object(v.jsxs)(p.a,{form:P,name:"advanced_search",className:"ant-advanced-search-form",initialValues:{client:U.client,collection:"cash_selected",date:O()(U.date),amount:U.amount,paymentType:U.paymentType,remark:U.remark},children:[Object(v.jsxs)(c.a,{gutter:20,className:"",children:[Object(v.jsx)(s.a,{lg:8,md:8,sm:12,xs:24,className:"gx-px-5",children:Object(v.jsxs)(p.a.Item,{style:{position:"relative"},label:"User",name:"client",rules:[{required:!0}],children:[Object(v.jsx)(b.a,{placeholder:"Select a person",onChange:e=>(e=>{A(e);const t={userType:z,searchValue:e,cashTransaction:!0};e.length>3&&H(Object(d.Ub)(t))})(e.target.value),value:"".concat(null===l||void 0===l?void 0:l.name," (").concat(null===l||void 0===l?void 0:l.username,")"),className:"gx-border-redius0"}),Object(v.jsx)(j.a,{className:"gx-bg-white gx-px-1",style:{position:"absolute",top:"37px",left:0,zIndex:2},mode:"vertical",children:L.map(((e,t)=>Object(v.jsxs)(j.a.Item,{onClick:()=>(async e=>{A(e.username),I({userId:e.userId,userType:e.userType}),F((t=>({...t,client:e.username})));let t={downlineUserId:e.userId};await H(Object(d.Cc)(t)),await E(!0),await H(Object(d.Sb)())})(e),children:["".concat(e.username," (").concat(e.name,")"),"  "]},t)))})]})}),Object(v.jsx)(s.a,{lg:8,md:8,sm:12,xs:24,className:"gx-px-5",children:Object(v.jsx)(p.a.Item,{label:"Collection",name:"collection",rules:[{required:!0}],children:Object(v.jsx)(g.a,{children:Object(v.jsx)(g.a.Option,{value:"cash_selected",children:"CASH A/C"})})})}),Object(v.jsx)(s.a,{lg:8,md:8,sm:12,xs:24,className:"gx-px-5",children:Object(v.jsx)(p.a.Item,{label:"Date",name:"date",rules:[{required:!0}],children:Object(v.jsx)(h.a,{className:"gx-mb-3 gx-w-100 gx-border-redius0",onChange:(e,t)=>{M("date",t)}})})}),Object(v.jsx)(s.a,{lg:8,md:8,sm:12,xs:24,className:"gx-px-5",children:Object(v.jsx)(p.a.Item,{label:"Amount",name:"amount",rules:[{required:!0}],children:Object(v.jsx)(b.a,{placeholder:"Amount",className:"gx-border-redius0",onChange:e=>M("amount",e.target.value)})})}),Object(v.jsx)(s.a,{lg:8,md:8,sm:12,xs:24,className:"gx-px-5",children:Object(v.jsx)(p.a.Item,{label:"Payment Type",name:"paymentType",rules:[{required:!0}],children:Object(v.jsxs)(g.a,{showSearch:!0,placeholder:"Select PaymentType",optionFilterProp:"children",onChange:e=>M("paymentType",e),filterOption:(e,t)=>t.children.toLowerCase().indexOf(e.toLowerCase())>=0,children:[Object(v.jsx)(g.a.Option,{value:"dena",children:"PAYMENT-DIYA"}),Object(v.jsx)(g.a.Option,{value:"lena",children:"PAYMENT-LIYA"})]})})}),Object(v.jsx)(s.a,{lg:8,md:8,sm:12,xs:24,className:"gx-px-5",children:Object(v.jsx)(p.a.Item,{label:"Remark",name:"remark",rules:[{required:!0}],children:Object(v.jsx)(b.a,{placeholder:"Remark",className:"gx-border-redius0",onChange:e=>M("remark",e.target.value)})})})]}),Object(v.jsx)(c.a,{children:Object(v.jsx)(s.a,{lg:8,md:8,sm:12,xs:24,className:"gx-px-5",children:Object(v.jsx)(p.a.Item,{label:"Ledger Type",name:"ledgerType",rules:[{required:!0}],children:Object(v.jsxs)(g.a,{showSearch:!0,placeholder:"All",optionFilterProp:"children",onChange:e=>M("ledgerType",e),filterOption:(e,t)=>t.children.toLowerCase().indexOf(e.toLowerCase())>=0,children:[Object(v.jsx)(g.a.Option,{value:"all",children:"All"}),Object(v.jsx)(g.a.Option,{value:"daimondCasino",children:"Daimond Casino"}),Object(v.jsx)(g.a.Option,{value:"internationalCasino",children:"International Casino"}),Object(v.jsx)(g.a.Option,{value:"settle",children:"Settle"}),Object(v.jsx)(g.a.Option,{value:"cricket",children:"Cricket"})]})})})}),Object(v.jsx)(c.a,{children:Object(v.jsx)(s.a,{span:24,style:{textAlign:"left"},children:Object(v.jsx)(f.a,{type:"primary",onClick:()=>(e=>{let t=null;t="client"===z?"dena"===U.paymentType?-1*U.amount:U.amount:"dena"===U.paymentType?U.amount:-1*U.amount;let n={date:U.date,remark:U.remark,amount:t,paymentType:U.paymentType,downlineUserId:U.client,downlineUserType:z};"all"!==U.ledgerType&&(n.ledgerType=U.ledgerType),H(Object(d.zc)(n)),a()})(),className:"gx-border-redius0",children:"Submit"})})})]})})})},w=a(353),T=a(603);var C=()=>{const e=Object(u.d)(),t=Object(i.useHistory)(),{userType:a,priority:p}=Object(i.useParams)(),[x,b]=Object(n.useState)({}),[j,g]=Object(n.useState)([]),[h,f]=Object(n.useState)([]),[y,O]=Object(n.useState)([]),[C,k]=Object(n.useState)([]),[P,R]=Object(n.useState)([]),[I,S]=Object(n.useState)({visible:!1,data:null}),{userLenaDenaItems:A,userLedgerListData:L}=Object(u.e)((e=>e.UserReducer));Object(n.useEffect)((()=>{if(p){return E({userId:p,userType:a})}D()}),[a,p]),Object(n.useEffect)((()=>{const e=A;if(null!==e&&void 0!==e&&e.data){var t;let a=e&&e.data?e.data.filter((e=>"client"==e.userType?e.balance<0:e.balance>0)):{},n=null===a||void 0===a?void 0:a.map((e=>e.balance)),r=null===(t=e.data)||void 0===t?void 0:t.map((e=>e.userType)),c=n.reduce(((e,t)=>e+t),0),s=e&&e.data?e.data.filter((e=>"client"==e.userType?e.balance>0:e.balance<0)):{},l=(null===s||void 0===s?void 0:s.map((e=>e.balance))).reduce(((e,t)=>e+t),0),i=e&&e.data?e.data.filter((e=>0===e.balance)):{};b(a),g(s),f(r),O(i),k(Math.abs(c.toFixed(2))),R(Math.abs(l).toFixed(2))}}),[null===A||void 0===A?void 0:A.data]);const D=async()=>{let t={fetchUserType:a};e(Object(d.zb)(t))},_=async e=>{t.push("/components/dataEntry/cascader-".concat(null===e||void 0===e?void 0:e.userType,"/").concat(null===e||void 0===e?void 0:e.userId))},E=async t=>{let a=(e=>{let t=(null===e||void 0===e?void 0:e.priority)-1;if(!t)return"";let a="";switch(t){case 8:a="subowner",t=8;break;case 7:a="superadmin",t=7;break;case 6:a="admin",t=6;break;case 5:a="subadmin",t=5;break;case 4:a="master",t=4;break;case 3:a="superagent",t=3;break;case 2:a="agent",t=2;break;case 1:a="client",t=1}return a})(m.b[t.userType]),n={sortData:{createdAt:1},downlineUserId:t.userId,downlineUserType:t.userType,fetchUserType:a};e(Object(d.zb)(n))},U=[{title:"User Details",dataIndex:"name",render:(e,t)=>Object(v.jsxs)("span",{className:"gx-font-weight-normal gx-pointer",onClick:()=>(e=>{if("client"===e.userType)return null;_(e)})(t),children:[Object(v.jsx)(w.a,{className:"gx-text-blue"})," ","".concat(t.name," (").concat(t.username,")")]})},{title:"Balance",dataIndex:"balance",render:e=>e<0?Number.parseFloat(e?Math.abs(e):0).toFixed(2):e.toFixed(2)},{title:"",dataIndex:"",render:(e,t)=>Object(v.jsx)("a",{className:"gx-font-weight-normal  gx-bg-flex gx-justify-content-center gx-pointer",href:"/components/dataDisplay/avatar-".concat(null===t||void 0===t?void 0:t.userType,"/").concat(null===t||void 0===t?void 0:t.username,"/").concat(encodeURIComponent(null===t||void 0===t?void 0:t.name),"/").concat(null===t||void 0===t?void 0:t.userId),children:Object(v.jsx)(T.a,{className:"gx-p-1 gx-rounded gx-text-grey",style:{background:"rgb(255, 241, 0)"}})})}];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(r.a,{className:"gx-card gx-w-100 gx-pb-3 ",children:[Object(v.jsxs)("div",{className:"gx-bg-grey gx-px-3 gx-py-3 gx-bg-flex gx-align-items-center  ",children:[Object(v.jsx)("span",{className:"gx-fs-lg gx-font-weight-bold gx-text-white gx-align-items-center  gx-text-uppercase",children:"".concat("subadmin"===h[0]?"mini admin":h[0]," master Ledger")}),Object(v.jsx)(o.a,{})]}),Object(v.jsxs)(c.a,{children:[Object(v.jsxs)(s.a,{md:8,sm:12,xs:24,className:"gx-py-3",children:[Object(v.jsx)("div",{className:"gx-py-1 gx-bg-green-0 gx-text-uppercase",children:Object(v.jsxs)("span",{className:" gx-bg-flex gx-mx-3 gx-py-2 gx-text-white gx-fs-lg",children:[" ",Object(v.jsx)("div",{className:"gx-justify-content-start ",children:"Lena "})," ",Object(v.jsx)("div",{className:"gx-justify-content-end",children:Number(C).toFixed(2)})]})}),x&&x.length>0?Object(v.jsx)(l.a,{rowKey:e=>e.userId,className:"gx-table-responsive gx-text-uppercase",columns:U,dataSource:x,bordered:!0,pagination:!1,size:"small"}):Object(v.jsx)(l.a,{className:"gx-table-responsive gx-text-uppercase",columns:U,bordered:!0,pagination:!1,size:"small"})]}),Object(v.jsxs)(s.a,{md:8,sm:12,xs:24,className:"gx-py-3",children:[Object(v.jsx)("div",{className:"gx-py-1 gx-bg-danger gx-text-uppercase",children:Object(v.jsxs)("span",{className:" gx-bg-flex gx-mx-3 gx-py-2 gx-text-white gx-fs-lg",children:[" ",Object(v.jsx)("div",{className:"gx-justify-content-start ",children:"Dena "})," ",Object(v.jsx)("div",{className:"gx-justify-content-end",children:P})]})}),j&&j.length>0?Object(v.jsx)(l.a,{rowKey:e=>e.userId,className:"gx-table-responsive gx-text-uppercase",columns:U,dataSource:j,bordered:!0,pagination:!1,size:"small"}):Object(v.jsx)(l.a,{className:"gx-table-responsive gx-text-uppercase",columns:U,bordered:!0,pagination:!1,size:"small"})]}),Object(v.jsxs)(s.a,{md:8,sm:12,xs:24,className:"gx-py-3",children:[Object(v.jsx)("div",{className:" gx-py-1 gx-text-uppercase ",style:{background:"#5DB5F5"},children:Object(v.jsxs)("span",{className:" gx-bg-flex gx-mx-3 gx-py-2 gx-text-white gx-fs-lg",children:[" ",Object(v.jsx)("div",{className:"gx-justify-content-start ",children:"Clear "})," ",Object(v.jsx)("div",{className:"gx-justify-content-end",children:" 0"})]})}),y&&y.length>0?Object(v.jsx)(l.a,{className:"gx-table-responsive gx-text-uppercase",columns:U,dataSource:y,bordered:!0,pagination:!1,rowKey:e=>e.userId,size:"small"}):Object(v.jsx)(l.a,{className:"gx-table-responsive gx-text-uppercase",columns:U,bordered:!0,pagination:!1,size:"small"})]})]})]}),Object(v.jsx)(N,{data:I.data,visible:I.visible,handleClose:()=>{S({visible:!1})},userLedgerListData:L})]})};t.default=()=>Object(v.jsx)(C,{})}}]);